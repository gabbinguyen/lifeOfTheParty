"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("date-fns/isValid")),n=e(require("format-string-by-pattern")),r=require("react"),o=e(r),a=e(require("react-fast-compare")),l=require("@date-fns/upgrade/v2"),i=require("date-fns"),c=e(require("date-fns/format")),s=e(require("date-fns/isBefore")),d=e(require("date-fns/startOfDay")),u=e(require("dayzed")),p=e(require("date-fns/compareAsc")),f=e(require("date-fns/isSameDay")),h=e(require("classnames")),g=require("semantic-ui-react");function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function y(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}var b=function(e,t,n){return!(t&&s(e,t)||n&&s(n,e))},k=function(e,t){var n=new Date;return{date:d(n),nextMonth:!1,prevMonth:!1,selectable:b(n,e,t),selected:!1,today:!0}},D=function(e,t){return e?c(d(e),l.convertTokens(t)):void 0},O=function(e,t){return e?Array.isArray(e)?e.map((function(e){return D(e,t)})).join(" - "):D(e,t):""},C=function(e){return e.replace(/[D, Y]/gi,(function(e){return e.toLowerCase()}))},E=function(e,t){return i.parse(e,C(t),new Date)},w=function(e,t){var n=C(t);return e.split(" - ").map((function(e){return i.parse(e,n,new Date)})).sort((function(e,t){return e>t?1:-1}))},S=function(e){return void 0===e&&(e=""),e.replace(/[^\d]/g,"")};function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.some((function(t){return t&&t.apply(void 0,[e].concat(r)),e.defaultPrevented}))}}function R(e,t){return 2===e.length&&e[0]<=t&&e[1]>=t}var P=function(e){function t(){var t,n;return(t=e.apply(this,arguments)||this).state={offset:0},t.rootNode=o.createRef(),t.handleArrowKeys=(n={left:function(){t.getKeyOffset(-1)},right:function(){t.getKeyOffset(1)},up:function(){t.getKeyOffset(-7)},down:function(){t.getKeyOffset(7)}},function(e){var t={37:n.left,39:n.right,38:n.up,40:n.down}[e.keyCode];t&&t(e)}),t.setRootNode=function(e){t.rootNode=e},t.getRootProps=function(e){var n,r=void 0===e?{}:e,o=r.refKey,a=void 0===o?"ref":o,l=y(r,["refKey"]);return v(((n={})[a]=t.setRootNode,n.onKeyDown=t.handleArrowKeys,n),l)},t._handleOffsetChanged=function(e){t.setState({offset:e})},t}m(t,e);var n=t.prototype;return n.getKeyOffset=function(e){if(this.rootNode.current){var t=document.activeElement,n=this.rootNode.current.querySelectorAll("button");n.forEach((function(r,o){var a=o+e;r===t&&(a<=n.length-1&&a>=0?n[a].focus():n[0].focus())}))}},n.componentDidUpdate=function(e){this.props.date!==e.date&&this._handleOffsetChanged(0)},n.render=function(){var e=this,t=this.props,n=t.children,r=y(t,["children"]);return o.createElement(u,Object.assign({},r,{offset:this.state.offset,onOffsetChanged:this._handleOffsetChanged,render:function(t){return n(v({},t,{getRootProps:e.getRootProps}))}}))},t}(o.Component),M=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._handleOnDateSelected=function(e,n){var r=e.date,o=t.props,a=o.selected,l=o.onChange;if(e.selectable){var i=r;a&&a.getTime()===r.getTime()&&(i=null),l&&l(n,i)}},t}return m(t,e),t.prototype.render=function(){return o.createElement(P,Object.assign({},this.props,{onDateSelected:this._handleOnDateSelected}))},t}(o.Component),j=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).state={hoveredDate:null},t.setHoveredDate=function(e){t.setState((function(t){return t.hoveredDate===e?null:{hoveredDate:e}}))},t.onMouseLeave=function(){t.setHoveredDate(null)},t._handleOnDateSelected=function(e,n){var r=e.date,o=t.props,a=o.selected,l=o.onChange;if(e.selectable){var i=r.getTime(),c=[].concat(a);a.length?1===a.length?a[0].getTime()<i?c.push(r):c.unshift(r):2===c.length&&(c=[r]):c.push(r),l&&l(n,c),2===c.length&&t.setHoveredDate(null)}},t.getEnhancedDateProps=function(e,n,r){var o=r.onMouseEnter,a=r.onFocus,l=y(r,["onMouseEnter","onFocus"]),i=t.state.hoveredDate,c=l.dateObj.date;return e(v({},l,{inRange:R(n,c),start:n[0]&&f(n[0],c),end:n[1]&&f(n[1],c),hovered:i&&f(i,c),onMouseEnter:I(o,(function(){t.onHoverFocusDate(c)})),onFocus:I(a,(function(){t.onHoverFocusDate(c)}))}))},t.getEnhancedRootProps=function(e,n){return e(v({},n,{onMouseLeave:t.onMouseLeave}))},t}m(t,e);var n=t.prototype;return n.onHoverFocusDate=function(e){1===this.props.selected.length&&this.setHoveredDate(e)},n.render=function(){var e=this,t=this.props,n=t.children,r=y(t,["children"]),a=this.state.hoveredDate,l=this.props.selected,i=2!==l.length&&l.length&&a?[l[0],a].sort(p):l;return o.createElement(P,Object.assign({},r,{onDateSelected:this._handleOnDateSelected}),(function(t){var r=t.getRootProps,o=t.getDateProps,a=y(t,["getRootProps","getDateProps"]);return n(v({},a,{getRootProps:e.getEnhancedRootProps.bind(e,r),getDateProps:e.getEnhancedDateProps.bind(e,o,i)}))}))},t}(o.Component);j.defaultProps={selected:[]};var B=function(e){var t=e.icon,n=y(e,["icon"]);return o.createElement(g.Button,Object.assign({basic:!0,compact:!0,icon:t},n))};function x(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}x(".clndr-cell{background-color:#fff;transition:all .2s;padding:5px 0;height:30px;cursor:pointer}.clndr-cell.inverted{background-color:#4f4f4f}.clndr-cell.inverted:hover{background-color:#757575;color:inherit}.clndr-cell:hover{background-color:#cacbcd;color:inherit}.clndr-cell-today{background-color:#e0e1e2}.clndr-cell-inrange{background-color:#cacbcd;color:inherit}.clndr-cell-inrange.inverted{background-color:#757575;color:inherit}.clndr-cell-disabled{cursor:default;opacity:.45}.clndr-cell-disabled:hover{background-color:#fff}.clndr-cell-disabled.inverted:hover{background-color:#4f4f4f;color:inherit}.clndr-cell-selected{background-color:#4f4f4f;color:#f2f2f2}.clndr-cell-selected.inverted{background-color:#fff;color:#000}.clndr-cell-other-month{color:#d9d9d9}.clndr-cell-other-month.inverted{color:#a6a6a6}");var V=function(e){var t=e.inRange,n=e.inverted,r=e.nextMonth,a=e.prevMonth,l=e.selectable,i=e.selected,c=e.today,s=y(e,["end","hovered","inRange","inverted","nextMonth","prevMonth","selectable","selected","start","today"]);return o.createElement("span",Object.assign({className:h("clndr-cell",{inverted:n,"clndr-cell-today":c,"clndr-cell-disabled":!l,"clndr-cell-other-month":r||a,"clndr-cell-inrange":t,"clndr-cell-selected":i})},s))};V.defaultProps={end:!1,hovered:!1,inRange:!1,nextMonth:!1,prevMonth:!1,start:!1};var q={marginTop:10},F=function(e){var t=y(e,["end","hovered","inRange","nextMonth","prevMonth","selectable","selected","start","today"]);return o.createElement(g.Button,Object.assign({className:"clndr-button-today",compact:!0,"data-testid":"datepicker-today-button",fluid:!0,style:q},t))};x(".clndr-calendars-segment{text-align:center;margin-bottom:.25rem!important;margin-top:.25rem!important}.clndr-calendars-segment.clndr-floating{position:absolute!important;z-index:2000}.clndr-calendars-wrapper{display:grid;grid-gap:1em;grid-template-columns:repeat(var(--n,1),1fr)}.clndr-control{display:grid;grid-template-columns:repeat(3,1fr);margin-bottom:10px;align-items:center}.clndr-days{text-align:center;display:grid;grid-gap:1px;grid-template-columns:repeat(7,2.2rem);background-color:rgba(0,0,0,.1);border:1px solid rgba(0,0,0,.1);border-radius:.28571429rem;overflow:hidden}.clndr-left{left:0}.clndr-right{right:0}.clndr-top{bottom:100%}.clndr-bottom{top:100%}.clndr-calendars-segment.clndr-top{box-shadow:0 -1px 2px 0 rgba(34,36,38,.15)!important;margin-bottom:.25rem!important}");var N={leftBtn:{textAlign:"start"},rightBtn:{textAlign:"end"}},K={"top left":"clndr-top clndr-left","top right":"clndr-top clndr-right",left:"clndr-left",right:"clndr-right"},_=function(e){var t,n=e.calendars,a=e.filterDate,l=e.getBackProps,i=e.getDateProps,c=e.getForwardProps,s=e.inline,d=e.inverted,u=e.maxDate,p=e.minDate,f=e.months,m=e.nextMonth,y=e.nextYear,b=e.previousMonth,D=e.previousYear,O=e.showToday,C=e.todayButton,E=e.weekdays;return o.createElement(g.Segment,{inverted:d,className:h("clndr-calendars-segment",(t={"clndr-floating":!s},t[K[e.pointing]]=!s,t))},o.createElement("div",{className:"clndr-calendars-wrapper",style:{"--n":n.length}},n.map((function(e,t){return o.createElement("div",{key:e.year+"-"+e.month},o.createElement("div",{className:"clndr-control"},o.createElement("div",{style:N.leftBtn},0===t&&o.createElement(r.Fragment,null,o.createElement(B,Object.assign({icon:"angle double left",inverted:d,title:D},l({calendars:n,offset:12}))),o.createElement(B,Object.assign({icon:"angle left",inverted:d,style:{marginRight:0},title:b},l({calendars:n}))))),o.createElement("span",{title:f[e.month]+" "+e.year},f[e.month].slice(0,3)," ",e.year),o.createElement("div",{style:N.rightBtn},t===n.length-1&&o.createElement(r.Fragment,null,o.createElement(B,Object.assign({icon:"angle right",inverted:d,title:m},c({calendars:n}))),o.createElement(B,Object.assign({icon:"angle double right",inverted:d,style:{marginRight:0},title:y},c({calendars:n,offset:12})))))),o.createElement("div",{className:"clndr-days"},E.map((function(t){return o.createElement(V,{key:e.year+"-"+e.month+"-"+t,inverted:d,title:t},t.slice(0,2))})),e.weeks.map((function(t){return t.map((function(t,n){var r=e.year+"-"+e.month+"-"+n;if(!t)return o.createElement(V,{key:r,inverted:d});var l=t.selectable&&a(t.date),c=function(e){if(e)return e.toISOString().slice(0,10)}(t.date);return o.createElement(V,Object.assign({key:r},t,i({dateObj:v({},t,{selectable:l})}),{"data-testid":"datepicker-cell-"+c,inverted:d,selectable:l}),t.date.getDate())}))}))))}))),O&&o.createElement(F,Object.assign({inverted:d},k(p,u),i({dateObj:k(p,u)})),C))},T=function(e){var t=e.clearIcon,n=e.icon,r=e.isClearIconVisible,a=e.onClear,l=e.onClick;return r&&t&&o.isValidElement(t)?o.cloneElement(t,{"data-testid":"datepicker-icon",onClick:a}):r&&t&&!o.isValidElement(t)?o.createElement(g.Icon,{"data-testid":"datepicker-icon",link:!0,name:t,onClick:a}):n&&o.isValidElement(n)?o.cloneElement(n,{"data-testid":"datepicker-icon",onClick:l}):o.createElement(g.Icon,{"data-testid":"datepicker-icon",link:!0,name:n,onClick:l})},A=o.forwardRef((function(e,t){var n=e.clearIcon,r=e.icon,a=e.isClearIconVisible,l=e.label,i=e.onClear,c=e.onClick,s=e.required,d=e.value,u=y(e,["clearIcon","icon","isClearIconVisible","label","onClear","onClick","required","value"]);return o.createElement(g.Form.Field,{required:s},l&&o.createElement("label",{htmlFor:u.id},l),o.createElement(g.Input,Object.assign({"data-testid":"datepicker-input"},u,{ref:t,required:s,icon:o.createElement(T,{clearIcon:n,icon:r,isClearIconVisible:a,onClear:i,onClick:c}),onClick:c,value:d})))})),L={display:"inline-block",position:"relative"},z=["autoComplete","className","clearIcon","disabled","error","icon","iconPosition","id","label","loading","name","onBlur","onChange","onClick","onContextMenu","onDoubleClick","onFocus","onInput","onKeyDown","onKeyPress","onKeyUp","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","placeholder","required","size","transparent","readOnly"],H=function(e){function r(){var r;return(r=e.apply(this,arguments)||this).el=o.createRef(),r.inputRef=o.createRef(),r.state=r.initialState,r.Component=r.isRangeInput?j:M,r.resetState=function(e){var t=r.props,n=t.onChange;r.setState({isVisible:t.keepOpenOnClear,selectedDate:r.isRangeInput?[]:null,selectedDateFormatted:""},(function(){n(e,v({},r.props,{value:null}))}))},r.clearInput=function(e){r.resetState(e),r.handleBlur(e)},r.mousedownCb=function(e){r.state.isVisible&&r.el&&r.el.current&&!r.el.current.contains(e.target)&&r.close(e)},r.keydownCb=function(e){27===e.keyCode&&r.state.isVisible&&r.close(e)},r.close=function(e){window.removeEventListener("keydown",r.keydownCb),window.removeEventListener("mousedown",r.mousedownCb),r.handleBlur(e),r.setState({isVisible:!1})},r.focusOnInput=function(){var e,t;(null===(e=r.inputRef)||void 0===e?void 0:null===(t=e.current)||void 0===t?void 0:t.focus)&&r.inputRef.current.focus()},r.showCalendar=function(e){e.preventDefault(),window.addEventListener("mousedown",r.mousedownCb),window.addEventListener("keydown",r.keydownCb),r.focusOnInput(),r.setState({isVisible:!0})},r.handleRangeInput=function(e,t,n){void 0===n&&(n=!1);var o=r.props,a=o.format,l=o.keepOpenOnSelect,i=o.onChange;if(!e||!e.length)return r.resetState(t),void(n||r.handleBlur(t));var c={selectedDate:e,selectedDateFormatted:O(e,a),typedValue:null};r.setState(c,(function(){i(t,v({},r.props,{value:e})),2===e.length?(r.setState({isVisible:l}),l?r.focusOnInput():n||r.handleBlur(t)):1===e.length?r.focusOnInput():n||r.handleBlur(t)}))},r.handleBasicInput=function(e,t,n){void 0===n&&(n=!1);var o=r.props,a=o.keepOpenOnSelect,l=o.onChange,i=o.clearOnSameDateClick;if(e){var c={isVisible:a,selectedDate:e,selectedDateFormatted:O(e,o.format),typedValue:null};a?r.focusOnInput():n||r.handleBlur(t),r.setState(c,(function(){l(t,v({},r.props,{value:e}))}))}else i?(r.resetState(t),n||r.handleBlur(t)):(r.setState({isVisible:a}),a?r.focusOnInput():n||r.handleBlur(t))},r.handleBlur=function(e){var n=r.props,o=n.format,a=n.onChange,l=r.state.typedValue;if((0,n.onBlur)(e),l){if(r.isRangeInput){var i=w(String(l),o);if(i.every(t))return void r.handleRangeInput(i,e,!0)}else{var c=E(String(l),o);if(t(c))return void r.handleBasicInput(c,e,!0)}r.setState({typedValue:null},(function(){a(e,v({},r.props,{value:null}))}))}},r.handleChange=function(e,t){var o=t.value,a=r.props,l=a.format,i=a.onChange,c=r.isRangeInput?l+" - "+l:l,s=a.allowOnlyNumbers?S(o):o;s?r.setState({selectedDate:r.isRangeInput?[]:null,selectedDateFormatted:"",typedValue:n(c,s)}):r.setState({selectedDate:r.isRangeInput?[]:null,selectedDateFormatted:"",typedValue:null},(function(){i(e,v({},r.props,{value:null}))}))},r.handleKeyDown=function(e){13===e.keyCode&&r.handleBlur()},r.onDateSelected=function(e,t){r.isRangeInput?r.handleRangeInput(t,e):r.handleBasicInput(t,e)},r}m(r,e);var l,i=r.prototype;return i.componentDidUpdate=function(e){var t=this.props,n=t.locale,r=t.value;a(r,e.value)||this.onDateSelected(void 0,r),n!==e.locale&&this.setState({locale:this.locale})},i.render=function(){var e=this,t=this.state,n=t.isVisible,r=t.locale,a=t.selectedDateFormatted,l=t.typedValue,i=this.props,c=i.clearable,s=i.pointing,d=i.filterDate,u=i.inline,p=i.inverted,f=i.readOnly,h=i.datePickerOnly,g=o.createElement(this.Component,Object.assign({},this.dayzedProps,{monthsToDisplay:this.isRangeInput?2:1,onChange:this.onDateSelected,selected:t.selectedDate,date:this.date}),(function(t){return o.createElement(_,Object.assign({},e.dayzedProps,t,r,{filterDate:d,inverted:p,pointing:s,weekdays:e.weekdays}))}));return u?g:o.createElement("div",{className:"field",style:L,ref:this.el},o.createElement(A,Object.assign({},this.inputProps,{isClearIconVisible:Boolean(c&&a),onBlur:function(){},onChange:this.handleChange,onClear:this.clearInput,onClick:f?null:this.showCalendar,onKeyDown:this.handleKeyDown,readOnly:f||h,ref:this.inputRef,value:l||a})),n&&g)},(l=[{key:"isRangeInput",get:function(){return"range"===this.props.type}},{key:"initialState",get:function(){var e=this.props,t=e.value;return{isVisible:!1,locale:this.locale,selectedDate:t||(this.isRangeInput?[]:null),selectedDateFormatted:O(t,e.format),typedValue:null}}},{key:"dayzedProps",get:function(){return e=z,t=v({},this.props),e.forEach((function(e){return delete t[e]})),t;var e,t}},{key:"inputProps",get:function(){var e,t,n=(e=this.props,t={},z.forEach((function(n){t[n]=e[n]})),t);return v({},n,{placeholder:void 0!==n.placeholder?n.placeholder:this.props.format})}},{key:"date",get:function(){var e=this.state.selectedDate;return e?this.isRangeInput?e[0]:e:this.props.date}},{key:"locale",get:function(){var e,t=this.props.locale;try{e=require("./locales/"+t+".json")}catch(n){console.warn('"'+t+'" is not a valid locale'),e=require("./locales/en-US.json")}return e}},{key:"weekdays",get:function(){var e,t;return(t=this.state.locale.weekdays).slice(e=this.dayzedProps.firstDayOfWeek).concat(t.slice(0,e))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(r.prototype,l),r}(o.Component);H.defaultProps={allowOnlyNumbers:!1,clearIcon:"close",clearOnSameDateClick:!0,clearable:!0,date:void 0,filterDate:function(){return!0},firstDayOfWeek:0,format:"YYYY-MM-DD",icon:"calendar",id:void 0,inline:!1,keepOpenOnClear:!1,keepOpenOnSelect:!1,label:void 0,locale:"en-US",name:void 0,onBlur:function(){},onChange:function(){},placeholder:void 0,pointing:"left",readOnly:!1,datePickerOnly:!1,required:!1,showToday:!0,showOutsideDays:!1,type:"basic",value:null,inverted:!1},exports.default=H;
//# sourceMappingURL=react-semantic-ui-datepickers.cjs.production.min.js.map
