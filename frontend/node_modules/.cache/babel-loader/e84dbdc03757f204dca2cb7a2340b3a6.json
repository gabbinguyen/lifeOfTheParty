{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/gabbinguyen/Flatiron/code/Projects/LifeOfTheParty/frontend/src/components/EventContainer.js\";\nimport React, { Component } from 'react';\nimport EventCard from './EventCard';\nimport { Button, Card, Row, Col } from 'react-bootstrap';\nlet eventsURL = 'http://localhost:3000/events/';\nexport default class EventContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      events: []\n    };\n\n    this.newAccomHandler = data => {\n      this.setState({\n        events: data\n      });\n    };\n\n    this.newActHandler = data => {\n      this.setState({\n        events: data\n      });\n    };\n\n    this.handleDelete = event => {\n      fetch(`http://localhost:3000/events/${event.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Auth-Key': localStorage.getItem('auth_key')\n        }\n      });\n      let array = this.state.events;\n      let i = array.indexOf(event);\n\n      if (i > -1) {\n        array.splice(i, 1);\n      }\n\n      this.setState({\n        events: array\n      });\n    };\n\n    this.handleActDelete = activity => {\n      fetch(`http://localhost:3000/activities/${activity.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Auth-Key': localStorage.getItem('auth_key')\n        }\n      }); // .then(res => res.json())\n\n      const updatedEvents = [...this.state.events].filter(event => event.id == activity.event_id);\n      console.log(updatedEvents);\n      const updatedActEvents = [...updatedEvents].filter(activity => activity.id !== activity.id); // let array = this.state.events;\n      // let i = array.indexOf(id);\n      //     if (i > -1) {\n      //         array.splice(i, 1);\n      //     }\n      // this.setState({\n      //     events: array\n      // })\n      // console.log(this.state.events)\n    };\n  }\n\n  componentDidMount() {\n    fetch(eventsURL, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Auth-Key': localStorage.getItem('auth_key')\n      }\n    }).then(res => res.json()).then(events => {\n      this.setState({\n        events\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.state.events.map(event => /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(EventCard, {\n          event: event,\n          name: event.name,\n          date: event.date,\n          collaborators: event.collaborators // flicollab={event.flights.map(flight=>flight.collaborator.user.name)}\n          ,\n          activities: event.activities,\n          accommodations: event.accommodations,\n          expenses: event.expenses,\n          flights: event.flights,\n          location: event.location,\n          handleDelete: this.handleDelete,\n          newAccom: this.newAccomHandler,\n          newAct: this.newActHandler,\n          actDelete: this.handleActDelete,\n          handleEditEvent: this.handleEditEvent\n        }, event.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/gabbinguyen/Flatiron/code/Projects/LifeOfTheParty/frontend/src/components/EventContainer.js"],"names":["React","Component","EventCard","Button","Card","Row","Col","eventsURL","EventContainer","state","events","newAccomHandler","data","setState","newActHandler","handleDelete","event","fetch","id","method","headers","localStorage","getItem","array","i","indexOf","splice","handleActDelete","activity","updatedEvents","filter","event_id","console","log","updatedActEvents","componentDidMount","then","res","json","render","map","name","date","collaborators","activities","accommodations","expenses","flights","location","handleEditEvent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport EventCard from './EventCard'\nimport {Button, Card, Row, Col} from 'react-bootstrap'\n\nlet eventsURL = 'http://localhost:3000/events/'\n\nexport default class EventContainer extends Component {\n    state={\n        events: []\n    }\n\n    componentDidMount(){\n        fetch(eventsURL, {\n            method:'GET',\n            headers:{\n                'Content-Type': 'application/json',\n                'Auth-Key': localStorage.getItem('auth_key')\n            }\n        })\n        .then(res => res.json())\n        .then(events => {\n            this.setState({events})\n        })\n    }\n\n    newAccomHandler = (data) => {\n        this.setState({events: data})    \n    }\n\n    newActHandler = (data) => {\n        this.setState({events: data})\n    }\n\n// Event Delete\n    handleDelete = (event) => {\n        fetch(`http://localhost:3000/events/${event.id}`, {\n            method: 'DELETE',\n            headers:{\n                'Content-Type': 'application/json',\n                'Auth-Key': localStorage.getItem('auth_key')\n            }\n        })\n        let array = this.state.events;\n        \n        let i = array.indexOf(event);\n            if (i > -1) {\n                array.splice(i, 1);\n            }\n        this.setState({\n            events: array\n        })\n    }\n\n// Activities Delete\n    handleActDelete = (activity) => {\n        fetch(`http://localhost:3000/activities/${activity.id}`, {\n            method: 'DELETE',\n            headers:{\n                'Content-Type': 'application/json',\n                'Auth-Key': localStorage.getItem('auth_key')\n            }\n        })\n        // .then(res => res.json())\n        const updatedEvents = [...this.state.events].filter(event => event.id == activity.event_id)\n        console.log(updatedEvents)\n        const updatedActEvents = [...updatedEvents].filter(activity => activity.id !== activity.id)\n        // let array = this.state.events;\n        \n        // let i = array.indexOf(id);\n        //     if (i > -1) {\n        //         array.splice(i, 1);\n        //     }\n        // this.setState({\n        //     events: array\n        // })\n        // console.log(this.state.events)\n    }\n    \n\n    render() {\n        return (\n            <div>\n            {this.state.events.map(event => \n                <Card > \n                    <EventCard \n                        key={event.id}\n                        event={event}\n                        name={event.name} \n                        date={event.date}\n                        collaborators={event.collaborators} \n                        // flicollab={event.flights.map(flight=>flight.collaborator.user.name)}\n                        activities={event.activities}\n                        accommodations={event.accommodations}\n                        expenses={event.expenses}\n                        flights={event.flights}\n                        location={event.location}\n                        handleDelete={this.handleDelete}\n                        newAccom={this.newAccomHandler}\n                        newAct={this.newActHandler}\n                        actDelete={this.handleActDelete}\n                        handleEditEvent={this.handleEditEvent}\n                        />\n                </Card> \n            )}\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}