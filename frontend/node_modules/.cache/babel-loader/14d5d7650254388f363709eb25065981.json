{"ast":null,"code":"import isValid from 'date-fns/isValid';\nimport formatStringByPattern from 'format-string-by-pattern';\nimport React, { Fragment } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { convertTokens } from '@date-fns/upgrade/v2';\nimport { parse } from 'date-fns';\nimport format from 'date-fns/format';\nimport isBefore from 'date-fns/isBefore';\nimport startOfDay from 'date-fns/startOfDay';\nimport Dayzed from 'dayzed';\nimport compareAsc from 'date-fns/compareAsc';\nimport isSameDay from 'date-fns/isSameDay';\nimport cn from 'classnames';\nimport { Button, Segment, Icon, Form, Input } from 'semantic-ui-react';\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar isSelectable = function isSelectable(date, minDate, maxDate) {\n  if (minDate && isBefore(date, minDate) || maxDate && isBefore(maxDate, date)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar getToday = function getToday(minDate, maxDate) {\n  var today = new Date();\n  return {\n    date: startOfDay(today),\n    nextMonth: false,\n    prevMonth: false,\n    selectable: isSelectable(today, minDate, maxDate),\n    selected: false,\n    today: true\n  };\n};\n\nvar formatDate = function formatDate(date, dateFormat) {\n  return date ? format(startOfDay(date), convertTokens(dateFormat)) : undefined;\n};\n\nvar omit = function omit(keysToOmit, obj) {\n  var newObj = _extends({}, obj);\n\n  keysToOmit.forEach(function (key) {\n    return delete newObj[key];\n  });\n  return newObj;\n};\n\nvar pick = function pick(keysToPick, obj) {\n  var newObj = {};\n  keysToPick.forEach(function (key) {\n    newObj[key] = obj[key];\n  });\n  return newObj;\n};\n\nvar moveElementsByN = function moveElementsByN(n, arr) {\n  return arr.slice(n).concat(arr.slice(0, n));\n};\n\nvar formatSelectedDate = function formatSelectedDate(selectedDate, dateFormat) {\n  if (!selectedDate) {\n    return '';\n  }\n\n  return Array.isArray(selectedDate) ? selectedDate.map(function (date) {\n    return formatDate(date, dateFormat);\n  }).join(' - ') : formatDate(selectedDate, dateFormat);\n};\n\nvar parseFormatString = function parseFormatString(formatString) {\n  return formatString.replace(/[D, Y]/gi, function (a) {\n    return a.toLowerCase();\n  });\n};\n\nvar parseOnBlur = function parseOnBlur(typedValue, formatString) {\n  return parse(typedValue, parseFormatString(formatString), new Date());\n};\n\nvar parseRangeOnBlur = function parseRangeOnBlur(typedValue, formatString) {\n  var parsedFormatString = parseFormatString(formatString);\n  var rangeValues = typedValue.split(' - ');\n  return rangeValues.map(function (value) {\n    return parse(value, parsedFormatString, new Date());\n  }).sort(function (a, b) {\n    return a > b ? 1 : -1;\n  });\n};\n\nvar onlyNumbers = function onlyNumbers(value) {\n  if (value === void 0) {\n    value = '';\n  }\n\n  return value.replace(/[^\\d]/g, '');\n};\n\nfunction getShortDate(date) {\n  if (!date) {\n    return undefined;\n  }\n\n  return date.toISOString().slice(0, 10);\n}\n/**\r\n * This is intended to be used to compose event handlers\r\n * They are executed in order until one of them calls\r\n * `event.preventDefault()`. Not sure this is the best\r\n * way to do this, but it seems legit...\r\n * @param {Function} fns the event hanlder functions\r\n * @return {Function} the event handler to add to an element\r\n */\n\n\nfunction composeEventHandlers() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (event) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.defaultPrevented;\n    });\n  };\n}\n/**\r\n * Create an event handler for keyboard key given a config map\r\n * of event handlers\r\n * @param {Object} config consists of left, right, up, and down\r\n * @return {Function} the event handler to handle keyboard key\r\n */\n\n\nfunction getArrowKeyHandlers(config) {\n  return function (event) {\n    var keyCode = event.keyCode;\n    var fn = {\n      37: config.left,\n      39: config.right,\n      38: config.up,\n      40: config.down\n    }[keyCode];\n\n    if (fn) {\n      fn(event);\n    }\n  };\n}\n/**\r\n * Checks if a given date is with date range\r\n * @param {Array} range the range array with upper and lower bound\r\n * @param {Date} date a given date\r\n * @return {Boolean} true if date is in the range, false otherwise\r\n */\n\n\nfunction isInRange(range, date) {\n  return range.length === 2 && range[0] <= date && range[1] >= date;\n}\n\nvar BaseDatePicker = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(BaseDatePicker, _React$Component);\n\n  function BaseDatePicker() {\n    var _this;\n\n    _this = _React$Component.apply(this, arguments) || this;\n    _this.state = {\n      offset: 0\n    };\n    _this.rootNode = React.createRef();\n    _this.handleArrowKeys = getArrowKeyHandlers({\n      left: function left() {\n        _this.getKeyOffset(-1);\n      },\n      right: function right() {\n        _this.getKeyOffset(1);\n      },\n      up: function up() {\n        _this.getKeyOffset(-7);\n      },\n      down: function down() {\n        _this.getKeyOffset(7);\n      }\n    });\n\n    _this.setRootNode = function (ref) {\n      _this.rootNode = ref;\n    };\n\n    _this.getRootProps = function (_temp) {\n      var _extends2;\n\n      var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\"]);\n\n      return _extends((_extends2 = {}, _extends2[refKey] = _this.setRootNode, _extends2.onKeyDown = _this.handleArrowKeys, _extends2), rest);\n    };\n\n    _this._handleOffsetChanged = function (offset) {\n      _this.setState({\n        offset: offset\n      });\n    };\n\n    return _this;\n  }\n\n  var _proto = BaseDatePicker.prototype;\n\n  _proto.getKeyOffset = function getKeyOffset(number) {\n    if (!this.rootNode.current) {\n      return;\n    }\n\n    var e = document.activeElement;\n    var buttons = this.rootNode.current.querySelectorAll('button');\n    buttons.forEach(function (el, i) {\n      var newNodeKey = i + number;\n\n      if (el === e) {\n        if (newNodeKey <= buttons.length - 1 && newNodeKey >= 0) {\n          buttons[newNodeKey].focus();\n        } else {\n          buttons[0].focus();\n        }\n      }\n    });\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this._handleOffsetChanged(0);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props = this.props,\n        children = _this$props.children,\n        rest = _objectWithoutPropertiesLoose(_this$props, [\"children\"]);\n\n    return React.createElement(Dayzed, Object.assign({}, rest, {\n      offset: this.state.offset,\n      onOffsetChanged: this._handleOffsetChanged,\n      render: function render(renderProps) {\n        return children(_extends({}, renderProps, {\n          getRootProps: _this2.getRootProps\n        }));\n      }\n    }));\n  };\n\n  return BaseDatePicker;\n}(React.Component);\n\nvar DatePicker = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(DatePicker, _React$Component);\n\n  function DatePicker() {\n    var _this;\n\n    _this = _React$Component.apply(this, arguments) || this;\n\n    _this._handleOnDateSelected = function (_ref, event) {\n      var selectable = _ref.selectable,\n          date = _ref.date;\n      var _this$props = _this.props,\n          selectedDate = _this$props.selected,\n          onChange = _this$props.onChange;\n\n      if (!selectable) {\n        return;\n      }\n\n      var newDate = date;\n\n      if (selectedDate && selectedDate.getTime() === date.getTime()) {\n        newDate = null;\n      }\n\n      if (onChange) {\n        onChange(event, newDate);\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = DatePicker.prototype;\n\n  _proto.render = function render() {\n    return React.createElement(BaseDatePicker, Object.assign({}, this.props, {\n      onDateSelected: this._handleOnDateSelected\n    }));\n  };\n\n  return DatePicker;\n}(React.Component);\n\nvar RangeDatePicker = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(RangeDatePicker, _React$Component);\n\n  function RangeDatePicker() {\n    var _this;\n\n    _this = _React$Component.apply(this, arguments) || this;\n    _this.state = {\n      hoveredDate: null\n    };\n\n    _this.setHoveredDate = function (date) {\n      _this.setState(function (state) {\n        return state.hoveredDate === date ? null : {\n          hoveredDate: date\n        };\n      });\n    }; // Calendar level\n\n\n    _this.onMouseLeave = function () {\n      _this.setHoveredDate(null);\n    };\n\n    _this._handleOnDateSelected = function (_ref, event) {\n      var selectable = _ref.selectable,\n          date = _ref.date;\n      var _this$props = _this.props,\n          selectedDates = _this$props.selected,\n          onChange = _this$props.onChange;\n\n      if (!selectable) {\n        return;\n      }\n\n      var dateTime = date.getTime();\n      var newDates = [].concat(selectedDates);\n\n      if (selectedDates.length) {\n        if (selectedDates.length === 1) {\n          var firstTime = selectedDates[0].getTime();\n\n          if (firstTime < dateTime) {\n            newDates.push(date);\n          } else {\n            newDates.unshift(date);\n          }\n        } else if (newDates.length === 2) {\n          newDates = [date];\n        }\n      } else {\n        newDates.push(date);\n      }\n\n      if (onChange) {\n        onChange(event, newDates);\n      }\n\n      if (newDates.length === 2) {\n        _this.setHoveredDate(null);\n      }\n    };\n\n    _this.getEnhancedDateProps = function (getDateProps, dateBounds, _ref2) {\n      var onMouseEnter = _ref2.onMouseEnter,\n          onFocus = _ref2.onFocus,\n          restProps = _objectWithoutPropertiesLoose(_ref2, [\"onMouseEnter\", \"onFocus\"]);\n\n      var hoveredDate = _this.state.hoveredDate;\n      var date = restProps.dateObj.date;\n      return getDateProps(_extends({}, restProps, {\n        inRange: isInRange(dateBounds, date),\n        start: dateBounds[0] && isSameDay(dateBounds[0], date),\n        end: dateBounds[1] && isSameDay(dateBounds[1], date),\n        // @ts-ignore\n        hovered: hoveredDate && isSameDay(hoveredDate, date),\n        onMouseEnter: composeEventHandlers(onMouseEnter, function () {\n          _this.onHoverFocusDate(date);\n        }),\n        onFocus: composeEventHandlers(onFocus, function () {\n          _this.onHoverFocusDate(date);\n        })\n      }));\n    };\n\n    _this.getEnhancedRootProps = function (getRootProps, props) {\n      return getRootProps(_extends({}, props, {\n        onMouseLeave: _this.onMouseLeave\n      }));\n    };\n\n    return _this;\n  } // Date level\n\n\n  var _proto = RangeDatePicker.prototype;\n\n  _proto.onHoverFocusDate = function onHoverFocusDate(date) {\n    if (this.props.selected.length !== 1) {\n      return;\n    }\n\n    this.setHoveredDate(date);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props2 = this.props,\n        children = _this$props2.children,\n        rest = _objectWithoutPropertiesLoose(_this$props2, [\"children\"]);\n\n    var hoveredDate = this.state.hoveredDate;\n    var selected = this.props.selected;\n    var dateBounds = selected.length === 2 || !selected.length || !hoveredDate ? selected : // prettier-ignore\n    // @ts-ignore\n    [selected[0], hoveredDate].sort(compareAsc);\n    return React.createElement(BaseDatePicker, Object.assign({}, rest, {\n      onDateSelected: this._handleOnDateSelected\n    }), function (_ref3) {\n      var getRootProps = _ref3.getRootProps,\n          getDateProps = _ref3.getDateProps,\n          renderProps = _objectWithoutPropertiesLoose(_ref3, [\"getRootProps\", \"getDateProps\"]);\n\n      return children(_extends({}, renderProps, {\n        getRootProps: _this2.getEnhancedRootProps.bind(_this2, getRootProps),\n        getDateProps: _this2.getEnhancedDateProps.bind(_this2, getDateProps, dateBounds)\n      }));\n    });\n  };\n\n  return RangeDatePicker;\n}(React.Component);\n\nRangeDatePicker.defaultProps = {\n  selected: []\n};\n\nvar CustomButton = function CustomButton(_ref) {\n  var icon = _ref.icon,\n      otherProps = _objectWithoutPropertiesLoose(_ref, [\"icon\"]);\n\n  return React.createElement(Button, Object.assign({\n    basic: true,\n    compact: true,\n    icon: icon\n  }, otherProps));\n};\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".clndr-cell{background-color:#fff;transition:all .2s;padding:5px 0;height:30px;cursor:pointer}.clndr-cell.inverted{background-color:#4f4f4f}.clndr-cell.inverted:hover{background-color:#757575;color:inherit}.clndr-cell:hover{background-color:#cacbcd;color:inherit}.clndr-cell-today{background-color:#e0e1e2}.clndr-cell-inrange{background-color:#cacbcd;color:inherit}.clndr-cell-inrange.inverted{background-color:#757575;color:inherit}.clndr-cell-disabled{cursor:default;opacity:.45}.clndr-cell-disabled:hover{background-color:#fff}.clndr-cell-disabled.inverted:hover{background-color:#4f4f4f;color:inherit}.clndr-cell-selected{background-color:#4f4f4f;color:#f2f2f2}.clndr-cell-selected.inverted{background-color:#fff;color:#000}.clndr-cell-other-month{color:#d9d9d9}.clndr-cell-other-month.inverted{color:#a6a6a6}\";\nstyleInject(css_248z);\n\nvar CalendarCell = function CalendarCell(_ref) {\n  var inRange = _ref.inRange,\n      inverted = _ref.inverted,\n      nextMonth = _ref.nextMonth,\n      prevMonth = _ref.prevMonth,\n      selectable = _ref.selectable,\n      selected = _ref.selected,\n      today = _ref.today,\n      otherProps = _objectWithoutPropertiesLoose(_ref, [\"end\", \"hovered\", \"inRange\", \"inverted\", \"nextMonth\", \"prevMonth\", \"selectable\", \"selected\", \"start\", \"today\"]);\n\n  return React.createElement(\"span\", Object.assign({\n    className: cn('clndr-cell', {\n      inverted: inverted,\n      'clndr-cell-today': today,\n      'clndr-cell-disabled': !selectable,\n      'clndr-cell-other-month': nextMonth || prevMonth,\n      'clndr-cell-inrange': inRange,\n      'clndr-cell-selected': selected\n    })\n  }, otherProps));\n};\n\nCalendarCell.defaultProps = {\n  end: false,\n  hovered: false,\n  inRange: false,\n  nextMonth: false,\n  prevMonth: false,\n  start: false\n};\nvar style = {\n  marginTop: 10\n};\n\nvar TodayButton = function TodayButton(_ref) {\n  var otherProps = _objectWithoutPropertiesLoose(_ref, [\"end\", \"hovered\", \"inRange\", \"nextMonth\", \"prevMonth\", \"selectable\", \"selected\", \"start\", \"today\"]);\n\n  return React.createElement(Button, Object.assign({\n    className: \"clndr-button-today\",\n    compact: true,\n    \"data-testid\": \"datepicker-today-button\",\n    fluid: true,\n    style: style\n  }, otherProps));\n};\n\nvar css_248z$1 = \".clndr-calendars-segment{text-align:center;margin-bottom:.25rem!important;margin-top:.25rem!important}.clndr-calendars-segment.clndr-floating{position:absolute!important;z-index:2000}.clndr-calendars-wrapper{display:grid;grid-gap:1em;grid-template-columns:repeat(var(--n,1),1fr)}.clndr-control{display:grid;grid-template-columns:repeat(3,1fr);margin-bottom:10px;align-items:center}.clndr-days{text-align:center;display:grid;grid-gap:1px;grid-template-columns:repeat(7,2.2rem);background-color:rgba(0,0,0,.1);border:1px solid rgba(0,0,0,.1);border-radius:.28571429rem;overflow:hidden}.clndr-left{left:0}.clndr-right{right:0}.clndr-top{bottom:100%}.clndr-bottom{top:100%}.clndr-calendars-segment.clndr-top{box-shadow:0 -1px 2px 0 rgba(34,36,38,.15)!important;margin-bottom:.25rem!important}\";\nstyleInject(css_248z$1);\nvar styles = {\n  leftBtn: {\n    textAlign: 'start'\n  },\n  rightBtn: {\n    textAlign: 'end'\n  }\n};\nvar pointings = {\n  'top left': 'clndr-top clndr-left',\n  'top right': 'clndr-top clndr-right',\n  left: 'clndr-left',\n  right: 'clndr-right'\n};\n\nvar Calendar = function Calendar(_ref) {\n  var _cn;\n\n  var calendars = _ref.calendars,\n      filterDate = _ref.filterDate,\n      getBackProps = _ref.getBackProps,\n      getDateProps = _ref.getDateProps,\n      getForwardProps = _ref.getForwardProps,\n      inline = _ref.inline,\n      inverted = _ref.inverted,\n      maxDate = _ref.maxDate,\n      minDate = _ref.minDate,\n      months = _ref.months,\n      nextMonth = _ref.nextMonth,\n      nextYear = _ref.nextYear,\n      previousMonth = _ref.previousMonth,\n      previousYear = _ref.previousYear,\n      showToday = _ref.showToday,\n      todayButton = _ref.todayButton,\n      weekdays = _ref.weekdays,\n      pointing = _ref.pointing;\n  return React.createElement(Segment, {\n    inverted: inverted,\n    className: cn('clndr-calendars-segment', (_cn = {\n      'clndr-floating': !inline\n    }, _cn[pointings[pointing]] = !inline, _cn))\n  }, React.createElement(\"div\", {\n    className: \"clndr-calendars-wrapper\",\n    style: {\n      '--n': calendars.length\n    }\n  }, calendars.map(function (calendar, calendarIdx) {\n    return React.createElement(\"div\", {\n      key: calendar.year + \"-\" + calendar.month\n    }, React.createElement(\"div\", {\n      className: \"clndr-control\"\n    }, React.createElement(\"div\", {\n      style: styles.leftBtn\n    }, calendarIdx === 0 && React.createElement(Fragment, null, React.createElement(CustomButton, Object.assign({\n      icon: \"angle double left\",\n      inverted: inverted,\n      title: previousYear\n    }, getBackProps({\n      calendars: calendars,\n      offset: 12\n    }))), React.createElement(CustomButton, Object.assign({\n      icon: \"angle left\",\n      inverted: inverted,\n      style: {\n        marginRight: 0\n      },\n      title: previousMonth\n    }, getBackProps({\n      calendars: calendars\n    }))))), React.createElement(\"span\", {\n      title: months[calendar.month] + \" \" + calendar.year\n    }, months[calendar.month].slice(0, 3), \" \", calendar.year), React.createElement(\"div\", {\n      style: styles.rightBtn\n    }, calendarIdx === calendars.length - 1 && React.createElement(Fragment, null, React.createElement(CustomButton, Object.assign({\n      icon: \"angle right\",\n      inverted: inverted,\n      title: nextMonth\n    }, getForwardProps({\n      calendars: calendars\n    }))), React.createElement(CustomButton, Object.assign({\n      icon: \"angle double right\",\n      inverted: inverted,\n      style: {\n        marginRight: 0\n      },\n      title: nextYear\n    }, getForwardProps({\n      calendars: calendars,\n      offset: 12\n    })))))), React.createElement(\"div\", {\n      className: \"clndr-days\"\n    }, weekdays.map(function (weekday) {\n      return React.createElement(CalendarCell, {\n        key: calendar.year + \"-\" + calendar.month + \"-\" + weekday,\n        inverted: inverted,\n        title: weekday\n      }, weekday.slice(0, 2));\n    }), calendar.weeks.map(function (week) {\n      return week.map(function (dateObj, weekIdx) {\n        var key = calendar.year + \"-\" + calendar.month + \"-\" + weekIdx;\n\n        if (!dateObj) {\n          return React.createElement(CalendarCell, {\n            key: key,\n            inverted: inverted\n          });\n        }\n\n        var selectable = dateObj.selectable && filterDate(dateObj.date);\n        var shortDate = getShortDate(dateObj.date);\n        return React.createElement(CalendarCell, Object.assign({\n          key: key\n        }, dateObj, getDateProps({\n          dateObj: _extends({}, dateObj, {\n            selectable: selectable\n          })\n        }), {\n          \"data-testid\": \"datepicker-cell-\" + shortDate,\n          inverted: inverted,\n          selectable: selectable\n        }), dateObj.date.getDate());\n      });\n    })));\n  })), showToday && React.createElement(TodayButton, Object.assign({\n    inverted: inverted\n  }, getToday(minDate, maxDate), getDateProps({\n    dateObj: getToday(minDate, maxDate)\n  })), todayButton));\n};\n\nvar CustomIcon = function CustomIcon(_ref) {\n  var clearIcon = _ref.clearIcon,\n      icon = _ref.icon,\n      isClearIconVisible = _ref.isClearIconVisible,\n      onClear = _ref.onClear,\n      onClick = _ref.onClick;\n\n  if (isClearIconVisible && clearIcon && React.isValidElement(clearIcon)) {\n    return React.cloneElement(clearIcon, {\n      'data-testid': 'datepicker-icon',\n      onClick: onClear\n    });\n  }\n\n  if (isClearIconVisible && clearIcon && !React.isValidElement(clearIcon)) {\n    return React.createElement(Icon, {\n      \"data-testid\": \"datepicker-icon\",\n      link: true,\n      name: clearIcon,\n      onClick: onClear\n    });\n  }\n\n  if (icon && React.isValidElement(icon)) {\n    return React.cloneElement(icon, {\n      'data-testid': 'datepicker-icon',\n      onClick: onClick\n    });\n  }\n\n  return React.createElement(Icon, {\n    \"data-testid\": \"datepicker-icon\",\n    link: true,\n    name: icon,\n    onClick: onClick\n  });\n};\n\nvar CustomInput = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var clearIcon = props.clearIcon,\n      icon = props.icon,\n      isClearIconVisible = props.isClearIconVisible,\n      label = props.label,\n      onClear = props.onClear,\n      onClick = props.onClick,\n      required = props.required,\n      value = props.value,\n      rest = _objectWithoutPropertiesLoose(props, [\"clearIcon\", \"icon\", \"isClearIconVisible\", \"label\", \"onClear\", \"onClick\", \"required\", \"value\"]);\n\n  return React.createElement(Form.Field, {\n    required: required\n  }, label && React.createElement(\"label\", {\n    htmlFor: rest.id\n  }, label), React.createElement(Input, Object.assign({\n    \"data-testid\": \"datepicker-input\"\n  }, rest, {\n    ref: ref,\n    required: required,\n    icon: React.createElement(CustomIcon, {\n      clearIcon: clearIcon,\n      icon: icon,\n      isClearIconVisible: isClearIconVisible,\n      onClear: onClear,\n      onClick: onClick\n    }),\n    onClick: onClick,\n    value: value\n  })));\n});\nvar style$1 = {\n  display: 'inline-block',\n  position: 'relative'\n};\nvar semanticInputProps = ['autoComplete', 'className', 'clearIcon', 'disabled', 'error', 'icon', 'iconPosition', 'id', 'label', 'loading', 'name', 'onBlur', 'onChange', 'onClick', 'onContextMenu', 'onDoubleClick', 'onFocus', 'onInput', 'onKeyDown', 'onKeyPress', 'onKeyUp', 'onMouseDown', 'onMouseEnter', 'onMouseLeave', 'onMouseMove', 'onMouseOut', 'onMouseOver', 'onMouseUp', 'placeholder', 'required', 'size', 'transparent', 'readOnly'];\n\nvar SemanticDatepicker = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(SemanticDatepicker, _React$Component);\n\n  function SemanticDatepicker() {\n    var _this;\n\n    _this = _React$Component.apply(this, arguments) || this;\n    _this.el = React.createRef();\n    _this.inputRef = React.createRef();\n    _this.state = _this.initialState;\n    _this.Component = _this.isRangeInput ? RangeDatePicker : DatePicker;\n\n    _this.resetState = function (event) {\n      var _this$props = _this.props,\n          keepOpenOnClear = _this$props.keepOpenOnClear,\n          onChange = _this$props.onChange;\n      var newState = {\n        isVisible: keepOpenOnClear,\n        selectedDate: _this.isRangeInput ? [] : null,\n        selectedDateFormatted: ''\n      };\n\n      _this.setState(newState, function () {\n        onChange(event, _extends({}, _this.props, {\n          value: null\n        }));\n      });\n    };\n\n    _this.clearInput = function (event) {\n      _this.resetState(event);\n\n      _this.handleBlur(event);\n    };\n\n    _this.mousedownCb = function (mousedownEvent) {\n      var isVisible = _this.state.isVisible;\n\n      if (isVisible && _this.el) {\n        if (_this.el.current && !_this.el.current.contains(mousedownEvent.target)) {\n          _this.close(mousedownEvent);\n        }\n      }\n    };\n\n    _this.keydownCb = function (keydownEvent) {\n      var isVisible = _this.state.isVisible;\n\n      if (keydownEvent.keyCode === 27 && isVisible) {\n        // Escape\n        _this.close(keydownEvent);\n      }\n    };\n\n    _this.close = function (event) {\n      window.removeEventListener('keydown', _this.keydownCb);\n      window.removeEventListener('mousedown', _this.mousedownCb);\n\n      _this.handleBlur(event);\n\n      _this.setState({\n        isVisible: false\n      });\n    };\n\n    _this.focusOnInput = function () {\n      var _this$inputRef, _this$inputRef$curren;\n\n      if ((_this$inputRef = _this.inputRef) === null || _this$inputRef === void 0 ? void 0 : (_this$inputRef$curren = _this$inputRef.current) === null || _this$inputRef$curren === void 0 ? void 0 : _this$inputRef$curren.focus) {\n        _this.inputRef.current.focus();\n      }\n    };\n\n    _this.showCalendar = function (event) {\n      event.preventDefault();\n      window.addEventListener('mousedown', _this.mousedownCb);\n      window.addEventListener('keydown', _this.keydownCb);\n\n      _this.focusOnInput();\n\n      _this.setState({\n        isVisible: true\n      });\n    };\n\n    _this.handleRangeInput = function (newDates, event, fromBlur) {\n      if (fromBlur === void 0) {\n        fromBlur = false;\n      }\n\n      var _this$props2 = _this.props,\n          format = _this$props2.format,\n          keepOpenOnSelect = _this$props2.keepOpenOnSelect,\n          onChange = _this$props2.onChange;\n\n      if (!newDates || !newDates.length) {\n        _this.resetState(event);\n\n        if (!fromBlur) {\n          _this.handleBlur(event);\n        }\n\n        return;\n      }\n\n      var newState = {\n        selectedDate: newDates,\n        selectedDateFormatted: formatSelectedDate(newDates, format),\n        typedValue: null\n      };\n\n      _this.setState(newState, function () {\n        onChange(event, _extends({}, _this.props, {\n          value: newDates\n        }));\n\n        if (newDates.length === 2) {\n          _this.setState({\n            isVisible: keepOpenOnSelect\n          });\n\n          if (keepOpenOnSelect) {\n            _this.focusOnInput();\n          } else if (!fromBlur) {\n            _this.handleBlur(event);\n          }\n        } else if (newDates.length === 1) {\n          _this.focusOnInput();\n        } else if (!fromBlur) {\n          _this.handleBlur(event);\n        }\n      });\n    };\n\n    _this.handleBasicInput = function (newDate, event, fromBlur) {\n      if (fromBlur === void 0) {\n        fromBlur = false;\n      }\n\n      var _this$props3 = _this.props,\n          format = _this$props3.format,\n          keepOpenOnSelect = _this$props3.keepOpenOnSelect,\n          onChange = _this$props3.onChange,\n          clearOnSameDateClick = _this$props3.clearOnSameDateClick;\n\n      if (!newDate) {\n        // if clearOnSameDateClick is true (this is the default case)\n        // then reset the state. This is what was previously the default\n        // behavior, without a specific prop.\n        if (clearOnSameDateClick) {\n          _this.resetState(event);\n\n          if (!fromBlur) {\n            _this.handleBlur(event);\n          }\n        } else {\n          // Don't reset the state. Instead, close or keep open the\n          // datepicker according to the value of keepOpenOnSelect.\n          // Essentially, follow the default behavior of clicking a date\n          // but without changing the value in state.\n          _this.setState({\n            isVisible: keepOpenOnSelect\n          });\n\n          if (keepOpenOnSelect) {\n            _this.focusOnInput();\n          } else if (!fromBlur) {\n            _this.handleBlur(event);\n          }\n        }\n\n        return;\n      }\n\n      var newState = {\n        isVisible: keepOpenOnSelect,\n        selectedDate: newDate,\n        selectedDateFormatted: formatSelectedDate(newDate, format),\n        typedValue: null\n      };\n\n      if (keepOpenOnSelect) {\n        _this.focusOnInput();\n      } else if (!fromBlur) {\n        _this.handleBlur(event);\n      }\n\n      _this.setState(newState, function () {\n        onChange(event, _extends({}, _this.props, {\n          value: newDate\n        }));\n      });\n    };\n\n    _this.handleBlur = function (event) {\n      var _this$props4 = _this.props,\n          format = _this$props4.format,\n          onBlur = _this$props4.onBlur,\n          onChange = _this$props4.onChange;\n      var typedValue = _this.state.typedValue;\n      onBlur(event);\n\n      if (!typedValue) {\n        return;\n      }\n\n      if (_this.isRangeInput) {\n        var parsedValue = parseRangeOnBlur(String(typedValue), format);\n        var areDatesValid = parsedValue.every(isValid);\n\n        if (areDatesValid) {\n          _this.handleRangeInput(parsedValue, event, true);\n\n          return;\n        }\n      } else {\n        var _parsedValue = parseOnBlur(String(typedValue), format);\n\n        var isDateValid = isValid(_parsedValue);\n\n        if (isDateValid) {\n          _this.handleBasicInput(_parsedValue, event, true);\n\n          return;\n        }\n      }\n\n      _this.setState({\n        typedValue: null\n      }, function () {\n        onChange(event, _extends({}, _this.props, {\n          value: null\n        }));\n      });\n    };\n\n    _this.handleChange = function (event, _ref) {\n      var value = _ref.value;\n      var _this$props5 = _this.props,\n          allowOnlyNumbers = _this$props5.allowOnlyNumbers,\n          format = _this$props5.format,\n          onChange = _this$props5.onChange;\n      var formatString = _this.isRangeInput ? format + \" - \" + format : format;\n      var typedValue = allowOnlyNumbers ? onlyNumbers(value) : value;\n\n      if (!typedValue) {\n        var newState = {\n          selectedDate: _this.isRangeInput ? [] : null,\n          selectedDateFormatted: '',\n          typedValue: null\n        };\n\n        _this.setState(newState, function () {\n          onChange(event, _extends({}, _this.props, {\n            value: null\n          }));\n        });\n\n        return;\n      }\n\n      _this.setState({\n        selectedDate: _this.isRangeInput ? [] : null,\n        selectedDateFormatted: '',\n        typedValue: formatStringByPattern(formatString, typedValue)\n      });\n    };\n\n    _this.handleKeyDown = function (evt) {\n      // If the Enter key was pressed...\n      if (evt.keyCode === 13) {\n        _this.handleBlur();\n      }\n    };\n\n    _this.onDateSelected = function (event, dateOrDates) {\n      if (_this.isRangeInput) {\n        _this.handleRangeInput(dateOrDates, event);\n      } else {\n        _this.handleBasicInput(dateOrDates, event);\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = SemanticDatepicker.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this$props6 = this.props,\n        locale = _this$props6.locale,\n        value = _this$props6.value;\n\n    if (!isEqual(value, prevProps.value)) {\n      this.onDateSelected(undefined, value);\n    }\n\n    if (locale !== prevProps.locale) {\n      this.setState({\n        locale: this.locale\n      });\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$state = this.state,\n        isVisible = _this$state.isVisible,\n        locale = _this$state.locale,\n        selectedDate = _this$state.selectedDate,\n        selectedDateFormatted = _this$state.selectedDateFormatted,\n        typedValue = _this$state.typedValue;\n    var _this$props7 = this.props,\n        clearable = _this$props7.clearable,\n        pointing = _this$props7.pointing,\n        filterDate = _this$props7.filterDate,\n        inline = _this$props7.inline,\n        inverted = _this$props7.inverted,\n        readOnly = _this$props7.readOnly,\n        datePickerOnly = _this$props7.datePickerOnly;\n    var datepickerComponent = React.createElement(this.Component, Object.assign({}, this.dayzedProps, {\n      monthsToDisplay: this.isRangeInput ? 2 : 1,\n      onChange: this.onDateSelected,\n      selected: selectedDate,\n      date: this.date\n    }), function (props) {\n      return React.createElement(Calendar, Object.assign({}, _this2.dayzedProps, props, locale, {\n        filterDate: filterDate,\n        inverted: inverted,\n        pointing: pointing,\n        weekdays: _this2.weekdays\n      }));\n    });\n    return inline ? datepickerComponent : React.createElement(\"div\", {\n      className: \"field\",\n      style: style$1,\n      ref: this.el\n    }, React.createElement(CustomInput, Object.assign({}, this.inputProps, {\n      isClearIconVisible: Boolean(clearable && selectedDateFormatted),\n      onBlur: function onBlur() {},\n      onChange: this.handleChange,\n      onClear: this.clearInput,\n      onClick: readOnly ? null : this.showCalendar,\n      onKeyDown: this.handleKeyDown,\n      readOnly: readOnly || datePickerOnly,\n      ref: this.inputRef,\n      value: typedValue || selectedDateFormatted\n    })), isVisible && datepickerComponent);\n  };\n\n  _createClass(SemanticDatepicker, [{\n    key: \"isRangeInput\",\n    get: function get() {\n      return this.props.type === 'range';\n    }\n  }, {\n    key: \"initialState\",\n    get: function get() {\n      var _this$props8 = this.props,\n          format = _this$props8.format,\n          value = _this$props8.value;\n      var initialSelectedDate = this.isRangeInput ? [] : null;\n      return {\n        isVisible: false,\n        locale: this.locale,\n        selectedDate: value || initialSelectedDate,\n        selectedDateFormatted: formatSelectedDate(value, format),\n        typedValue: null\n      };\n    }\n  }, {\n    key: \"dayzedProps\",\n    get: function get() {\n      return omit(semanticInputProps, this.props);\n    }\n  }, {\n    key: \"inputProps\",\n    get: function get() {\n      var props = pick(semanticInputProps, this.props);\n      var placeholder = props.placeholder !== undefined ? props.placeholder : this.props.format;\n      return _extends({}, props, {\n        placeholder: placeholder\n      });\n    }\n  }, {\n    key: \"date\",\n    get: function get() {\n      var selectedDate = this.state.selectedDate;\n      var date = this.props.date;\n\n      if (!selectedDate) {\n        return date;\n      }\n\n      return this.isRangeInput ? selectedDate[0] : selectedDate;\n    }\n  }, {\n    key: \"locale\",\n    get: function get() {\n      var locale = this.props.locale;\n      var localeJson;\n\n      try {\n        localeJson = require(\"./locales/\" + locale + \".json\");\n      } catch (e) {\n        console.warn(\"\\\"\" + locale + \"\\\" is not a valid locale\");\n        localeJson = require('./locales/en-US.json');\n      }\n\n      return localeJson;\n    }\n  }, {\n    key: \"weekdays\",\n    get: function get() {\n      var firstDayOfWeek = this.dayzedProps.firstDayOfWeek;\n      var weekdays = this.state.locale.weekdays;\n      return moveElementsByN(firstDayOfWeek, weekdays);\n    }\n  }]);\n\n  return SemanticDatepicker;\n}(React.Component);\n\nSemanticDatepicker.defaultProps = {\n  allowOnlyNumbers: false,\n  clearIcon: 'close',\n  clearOnSameDateClick: true,\n  clearable: true,\n  date: undefined,\n  filterDate: function filterDate() {\n    return true;\n  },\n  firstDayOfWeek: 0,\n  format: 'YYYY-MM-DD',\n  icon: 'calendar',\n  id: undefined,\n  inline: false,\n  keepOpenOnClear: false,\n  keepOpenOnSelect: false,\n  label: undefined,\n  locale: 'en-US',\n  name: undefined,\n  onBlur: function onBlur() {},\n  onChange: function onChange() {},\n  placeholder: undefined,\n  pointing: 'left',\n  readOnly: false,\n  datePickerOnly: false,\n  required: false,\n  showToday: true,\n  showOutsideDays: false,\n  type: 'basic',\n  value: null,\n  inverted: false\n};\nexport default SemanticDatepicker;","map":{"version":3,"sources":["../src/utils.ts","../src/pickers/utils.ts","../src/pickers/base.tsx","../src/pickers/basic.tsx","../src/pickers/range.tsx","../src/components/button.tsx","../node_modules/style-inject/dist/style-inject.es.js","../src/components/cell/cell.tsx","../src/components/today-button.tsx","../src/components/calendar/calendar.tsx","../src/components/icon.tsx","../src/components/input.tsx","../src/index.tsx"],"names":["isSelectable","minDate","isBefore","maxDate","getToday","today","date","startOfDay","nextMonth","prevMonth","selectable","selected","formatDate","format","convertTokens","omit","newObj","keysToOmit","pick","keysToPick","obj","moveElementsByN","arr","formatSelectedDate","Array","parseFormatString","a","parseOnBlur","parse","parseRangeOnBlur","parsedFormatString","rangeValues","typedValue","onlyNumbers","value","getShortDate","composeEventHandlers","fns","args","fn","event","getArrowKeyHandlers","config","keyCode","down","isInRange","range","BaseDatePicker","React","Component","offset","left","right","up","getKeyOffset","e","document","buttons","newNodeKey","i","el","refKey","rest","componentDidUpdate","prevProps","render","children","props","onOffsetChanged","_handleOffsetChanged","getRootProps","DatePicker","selectedDate","onChange","newDate","onDateSelected","_handleOnDateSelected","RangeDatePicker","hoveredDate","state","onHoverFocusDate","selectedDates","dateTime","newDates","firstTime","onMouseEnter","onFocus","restProps","dateObj","getDateProps","inRange","start","dateBounds","isSameDay","end","hovered","onMouseLeave","renderProps","CustomButton","icon","otherProps","basic","compact","CalendarCell","inverted","className","cn","style","marginTop","TodayButton","fluid","styles","leftBtn","textAlign","rightBtn","pointings","Calendar","calendars","filterDate","getBackProps","getForwardProps","inline","months","nextYear","previousMonth","previousYear","showToday","todayButton","weekdays","pointing","length","key","calendar","month","calendarIdx","title","marginRight","year","weekday","shortDate","CustomIcon","clearIcon","isClearIconVisible","onClear","onClick","link","name","CustomInput","label","required","Form","htmlFor","id","ref","display","position","semanticInputProps","SemanticDatepicker","allowOnlyNumbers","clearOnSameDateClick","clearable","firstDayOfWeek","keepOpenOnClear","keepOpenOnSelect","locale","onBlur","placeholder","readOnly","datePickerOnly","showOutsideDays","type","isEqual","initialSelectedDate","isVisible","selectedDateFormatted","localeJson","require","console","dayzedProps","newState","mousedownEvent","keydownEvent","window","fromBlur","parsedValue","String","areDatesValid","isDateValid","isValid","formatString","formatStringByPattern","evt","datepickerComponent","monthsToDisplay","inputProps","Boolean","handleChange","clearInput","showCalendar","onKeyDown","handleKeyDown","inputRef"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQO,IAAMA,YAAY,GAAG,SAAfA,YAAe,CAAA,IAAA,EAAA,OAAA,EAAA,OAAA,EAAA;AAC1B,MACGC,OAAO,IAAIC,QAAQ,CAAA,IAAA,EAApB,OAAoB,CAAnBD,IACAE,OAAO,IAAID,QAAQ,CAAA,OAAA,EAFtB,IAEsB,CAFtB,EAGE;AACA,WAAA,KAAA;AACD;;AAED,SAAA,IAAA;AARK,CAAA;;AAWA,IAAME,QAAQ,GAAG,SAAXA,QAAW,CAAA,OAAA,EAAA,OAAA,EAAA;AACtB,MAAMC,KAAK,GAAG,IAAd,IAAc,EAAd;AAEA,SAAO;AACLC,IAAAA,IAAI,EAAEC,UAAU,CADX,KACW,CADX;AAELC,IAAAA,SAAS,EAFJ,KAAA;AAGLC,IAAAA,SAAS,EAHJ,KAAA;AAILC,IAAAA,UAAU,EAAEV,YAAY,CAAA,KAAA,EAAA,OAAA,EAJnB,OAImB,CAJnB;AAKLW,IAAAA,QAAQ,EALH,KAAA;AAMLN,IAAAA,KAAK,EAAE;AANF,GAAP;AAHK,CAAA;;AAaA,IAAMO,UAAU,GAAG,SAAbA,UAAa,CAAA,IAAA,EAAA,UAAA,EAAA;AAAA,SACxBN,IAAI,GAAGO,MAAM,CAACN,UAAU,CAAX,IAAW,CAAX,EAAmBO,aAAa,CAAzC,UAAyC,CAAhC,CAAT,GADoB,SAAA;AAAnB,CAAA;;AAGA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAAA,UAAA,EAAA,GAAA,EAAA;AAClB,MAAMC,MAAM,GAAA,QAAA,CAAA,EAAA,EAAZ,GAAY,CAAZ;;AAEAC,EAAAA,UAAU,CAAVA,OAAAA,CAAmB,UAAA,GAAA,EAAA;AAAA,WAAS,OAAOD,MAAM,CAAtB,GAAsB,CAAtB;AAAnBC,GAAAA;AAEA,SAAA,MAAA;AALK,CAAA;;AAQA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAAA,UAAA,EAAA,GAAA,EAAA;AAClB,MAAMF,MAAM,GAAZ,EAAA;AAEAG,EAAAA,UAAU,CAAVA,OAAAA,CAAmB,UAAA,GAAA,EAAA;AACjBH,IAAAA,MAAM,CAANA,GAAM,CAANA,GAAcI,GAAG,CAAjBJ,GAAiB,CAAjBA;AADFG,GAAAA;AAIA,SAAA,MAAA;AAPK,CAAA;;AAUA,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAAA,CAAA,EAAA,GAAA,EAAA;AAAA,SAC7BC,GAAG,CAAHA,KAAAA,CAAAA,CAAAA,EAAAA,MAAAA,CAAoBA,GAAG,CAAHA,KAAAA,CAAAA,CAAAA,EADS,CACTA,CAApBA,CAD6B;AAAxB,CAAA;;AAGA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA,YAAA,EAAA,UAAA,EAAA;AAIhC,MAAI,CAAJ,YAAA,EAAmB;AACjB,WAAA,EAAA;AACD;;AAED,SAAOC,KAAK,CAALA,OAAAA,CAAAA,YAAAA,IACH,YAAY,CAAZ,GAAA,CAAiB,UAAA,IAAA,EAAA;AAAA,WAAUZ,UAAU,CAAA,IAAA,EAApB,UAAoB,CAApB;AAAjB,GAAA,EAAA,IAAA,CADGY,KACH,CADGA,GAEHZ,UAAU,CAAA,YAAA,EAFd,UAEc,CAFd;AARK,CAAA;;AAaA,IAAMa,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,YAAA,EAAA;AAAA,SAC/B,YAAY,CAAZ,OAAA,CAAA,UAAA,EAAiC,UAAA,CAAA,EAAA;AAAA,WAAOC,CAAC,CAAR,WAAOA,EAAP;AADF,GAC/B,CAD+B;AAA1B,CAAA;;AAGA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAA,UAAA,EAAA,YAAA,EAAA;AACzB,SAAOC,KAAK,CAAA,UAAA,EAAaH,iBAAiB,CAA9B,YAA8B,CAA9B,EAA8C,IAA1D,IAA0D,EAA9C,CAAZ;AADK,CAAA;;AAIA,IAAMI,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,UAAA,EAAA,YAAA,EAAA;AAC9B,MAAMC,kBAAkB,GAAGL,iBAAiB,CAA5C,YAA4C,CAA5C;AAEA,MAAMM,WAAW,GAAGC,UAAU,CAAVA,KAAAA,CAApB,KAAoBA,CAApB;AAEA,SAAO,WAAW,CAAX,GAAA,CACA,UAAA,KAAA,EAAA;AAAA,WAAWJ,KAAK,CAAA,KAAA,EAAA,kBAAA,EAA4B,IAA5C,IAA4C,EAA5B,CAAhB;AADA,GAAA,EAAA,IAAA,CAEC,UAAA,CAAA,EAAA,CAAA,EAAA;AAAA,WAAWF,CAAC,GAADA,CAAAA,GAAAA,CAAAA,GAAY,CAAvB,CAAA;AAFR,GAAO,CAAP;AALK,CAAA;;AAUA,IAAMO,WAAW,GAAG,SAAdA,WAAc,CAAA,KAAA,EAAA;AAAA,MAACC,KAAD,KAAA,KAAA,CAAA,EAAA;AAACA,IAAAA,KAAD,GAAA,EAACA;AAAD;;AAAA,SAAgBA,KAAK,CAALA,OAAAA,CAAAA,QAAAA,EAAhB,EAAgBA,CAAhB;AAApB,CAAA;;SAESC,Y,CAAa7B,I,EAAAA;AAC3B,MAAI,CAAJ,IAAA,EAAW;AACT,WAAA,SAAA;AACD;;AAED,SAAOA,IAAI,CAAJA,WAAAA,GAAAA,KAAAA,CAAAA,CAAAA,EAAP,EAAOA,CAAP;AACD;AC9FD;;;;;;;;;;AAQA,SAAgB8B,oBAAhB,GAAgBA;oCAAwBC,GAAAA,GAAAA,IAAAA,KAAAA,CAAAA,IAAAA,C,EAAAA,IAAAA,GAAAA,C,EAAAA,IAAAA,GAAAA,I,EAAAA,IAAAA,E,EAAAA;AAAAA,IAAAA,GAAAA,CAAAA,IAAAA,CAAAA,GAAAA,SAAAA,CAAAA,IAAAA,CAAAA;;;AACtC,SAAO,UAAA,KAAA,EAAA;AAAA,SAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAAWC,IAAX,GAAA,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;AAAWA,MAAAA,IAAX,CAAA,KAAA,GAAA,CAAA,CAAWA,GAAX,SAAA,CAAA,KAAA,CAAWA;AAAX;;AAAA,WACL,GAAG,CAAH,IAAA,CAAS,UAAA,EAAA,EAAA;AACP,UAAA,EAAA,EAAQ;AACNC,QAAAA,EAAE,CAAFA,KAAAA,CAAAA,KAAAA,CAAAA,EAAAA,CAAAA,KAAAA,EAAAA,MAAAA,CAAAA,IAAAA,CAAAA;AACD;;AAED,aAAOC,KAAK,CAAZ,gBAAA;AANG,KACL,CADK;AAAP,GAAA;AAQD;AAED;;;;;;;;AAMA,SAAgBC,mBAAhB,CAAoCC,MAApC,EAAoCA;AAClC,SAAO,UAAA,KAAA,EAAA;QACGC,OAAAA,GAAYH,KAAAA,CAAZG,O;AACR,QAAMJ,EAAE,GAAG;AACT,UAAIG,MAAM,CADD,IAAA;AAET,UAAIA,MAAM,CAFD,KAAA;AAGT,UAAIA,MAAM,CAHD,EAAA;AAIT,UAAIA,MAAM,CAACE;AAJF,MAAX,OAAW,CAAX;;AAMA,QAAA,EAAA,EAAQ;AACNL,MAAAA,EAAE,CAAFA,KAAE,CAAFA;AACD;AAVH,GAAA;AAYD;AAED;;;;;;;;AAMA,SAAgBM,SAAhB,CAA0BC,KAA1B,EAAiCxC,IAAjC,EAAiCA;AAC/B,SAAOwC,KAAK,CAALA,MAAAA,KAAAA,CAAAA,IAAsBA,KAAK,CAALA,CAAK,CAALA,IAAtBA,IAAAA,IAA0CA,KAAK,CAALA,CAAK,CAALA,IAAjD,IAAA;AACD;;IC3CKC,cAAAA,GAAAA,aAAAA,UAAAA,gBAAAA,EAAAA;;;AAAN,WAAA,cAAA,GAAA;;;;AACE,IAAA,KAAA,CAAA,KAAA,GAAQ;AACNG,MAAAA,MAAM,EAAE;AADF,KAAR;AAIA,IAAA,KAAA,CAAA,QAAA,GAAWF,KAAK,CAAhB,SAAWA,EAAX;AAEA,IAAA,KAAA,CAAA,eAAA,GAAkBP,mBAAmB,CAAC;AACpCU,MAAAA,IAAI,EAAE,SAAA,IAAA,GAAA;AACJ,QAAA,KAAA,CAAA,YAAA,CAAkB,CAAlB,CAAA;AAFkC,OAAA;AAIpCC,MAAAA,KAAK,EAAE,SAAA,KAAA,GAAA;AACL,QAAA,KAAA,CAAA,YAAA,CAAA,CAAA;AALkC,OAAA;AAOpCC,MAAAA,EAAE,EAAE,SAAA,EAAA,GAAA;AACF,QAAA,KAAA,CAAA,YAAA,CAAkB,CAAlB,CAAA;AARkC,OAAA;AAUpCT,MAAAA,IAAI,EAAE,SAAA,IAAA,GAAA;AACJ,QAAA,KAAA,CAAA,YAAA,CAAA,CAAA;AACD;AAZmC,KAAD,CAArC;;AAkCA,IAAA,KAAA,CAAA,WAAA,GAAc,UAAA,GAAA,EAAA;AACZ,MAAA,KAAA,CAAA,QAAA,GAAA,GAAA;AADF,KAAA;;AAIA,IAAA,KAAA,CAAA,YAAA,GAAe,UAAA,KAAA,EAAA;;;oCAA+B,E,GAAA,K;6BAA5BiB,M;UAAAA,MAAAA,GAAAA,WAAAA,KAAAA,KAAAA,CAAAA,GAAS,KAATA,GAAS,W;UAAUC,IAAAA,GAAAA,6BAAAA,CAAAA,IAAAA,EAAAA,CAAAA,QAAAA,CAAAA,C;;AACnC,aAAA,QAAA,EAAA,SAAA,GAAA,EAAA,EAAA,SAAA,CAAA,MAAA,CAAA,GACY,KAAA,CADZ,WAAA,EAAA,SAAA,CAAA,SAAA,GAEa,KAAA,CAFb,eAAA,EAAA,SAAA,GAAA,IAAA,CAAA;AADF,KAAA;;AAQA,IAAA,KAAA,CAAA,oBAAA,GAAuB,UAAA,MAAA,EAAA;AACrB,MAAA,KAAA,CAAA,QAAA,CAAc;AACZZ,QAAAA,MAAM,EAANA;AADY,OAAd;AADF,KAAA;;;AA6BD;;;;SA5DCI,Y,GAAAA,SAAAA,YAAAA,CAAAA,MAAAA,EAAAA;AACE,QAAI,CAAC,KAAA,QAAA,CAAL,OAAA,EAA4B;AAC1B;AACD;;AAED,QAAMC,CAAC,GAAGC,QAAQ,CAAlB,aAAA;AACA,QAAMC,OAAO,GAAG,KAAA,QAAA,CAAA,OAAA,CAAA,gBAAA,CAAhB,QAAgB,CAAhB;AACAA,IAAAA,OAAO,CAAPA,OAAAA,CAAgB,UAAA,EAAA,EAAA,CAAA,EAAA;AACd,UAAMC,UAAU,GAAGC,CAAC,GAApB,MAAA;;AACA,UAAIC,EAAE,KAAN,CAAA,EAAc;AACZ,YAAIF,UAAU,IAAID,OAAO,CAAPA,MAAAA,GAAdC,CAAAA,IAAoCA,UAAU,IAAlD,CAAA,EAAyD;AACvDD,UAAAA,OAAO,CAAPA,UAAO,CAAPA,CAAAA,KAAAA;AADF,SAAA,MAEO;AACLA,UAAAA,OAAO,CAAPA,CAAO,CAAPA,CAAAA,KAAAA;AACD;AACF;AARHA,KAAAA;AAUD,G;;SAoBDM,kB,GAAAA,SAAAA,kBAAAA,CAAAA,SAAAA,EAAAA;AACE,QAAI,KAAA,KAAA,CAAA,IAAA,KAAoBC,SAAS,CAAjC,IAAA,EAAwC;AACtC,WAAA,oBAAA,CAAA,CAAA;AACD;AACF,G;;SAEDC,M,GAAAA,SAAAA,MAAAA,GAAAA;;;sBACgC,KAAKE,K;QAA3BD,QAAAA,GAAAA,WAAAA,CAAAA,Q;QAAaJ,IAAAA,GAAAA,6BAAAA,CAAAA,WAAAA,EAAAA,CAAAA,UAAAA,CAAAA,C;;AAErB,WACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACMA,IADN,EACMA;AACJZ,MAAAA,MAAM,EAAE,KAAA,KAAA,CAAWA,MADfY;AAEJM,MAAAA,eAAe,EAAE,KAAKC,oBAFlBP;AAGJG,MAAAA,MAAM,EAAE,SAAA,MAAA,CAAA,WAAA,EAAA;AAAA,eACNC,QAAQ,CAAA,QAAA,CAAA,EAAA,EAAA,WAAA,EAAA;AAENI,UAAAA,YAAY,EAAE,MAAI,CAACA;AAFb,SAAA,CAAA,CADF;AAAA;AAHJR,KADN,CAAA,CADF;AAaD,G;;;CAjFGf,CAAuBC,KAAK,CAACC,SAA7BF,C;;ICDAwB,UAAAA,GAAAA,aAAAA,UAAAA,gBAAAA,EAAAA;;;AAAN,WAAA,UAAA,GAAA;;;;;AACE,IAAA,KAAA,CAAA,qBAAA,GAAwB,UAAA,IAAA,EAAA,KAAA,EAAA;UACpB7D,UAAAA,GAAAA,IAAAA,CAAAA,U;UAAYJ,IAAAA,GAAAA,IAAAA,CAAAA,I;wBAG+B,KAAA,CAAK6D,K;UAAhCK,YAAAA,GAAAA,WAAAA,CAAV7D,Q;UAAwB8D,QAAAA,GAAAA,WAAAA,CAAAA,Q;;AAEhC,UAAI,CAAJ,UAAA,EAAiB;AACf;AACD;;AAED,UAAIC,OAAO,GAAX,IAAA;;AACA,UAAIF,YAAY,IAAIA,YAAY,CAAZA,OAAAA,OAA2BlE,IAAI,CAAnD,OAA+CA,EAA/C,EAA+D;AAC7DoE,QAAAA,OAAO,GAAPA,IAAAA;AACD;;AAED,UAAA,QAAA,EAAc;AACZD,QAAAA,QAAQ,CAAA,KAAA,EAARA,OAAQ,CAARA;AACD;AAjBH,KAAA;;;AA4BD;;;;SARCR,M,GAAAA,SAAAA,MAAAA,GAAAA;AACE,WACE,KAAA,CAAA,aAAA,CAAA,cAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACM,KAAKE,KADX,EACWA;AACTQ,MAAAA,cAAc,EAAE,KAAKC;AADZT,KADX,CAAA,CADF;AAMD,G;;;CA5BGI,CAAmBvB,KAAK,CAACC,SAAzBsB,C;;ICOAM,eAAAA,GAAAA,aAAAA,UAAAA,gBAAAA,EAAAA;;;AAAN,WAAA,eAAA,GAAA;;;;AAQE,IAAA,KAAA,CAAA,KAAA,GAAQ;AAAEC,MAAAA,WAAW,EAAE;AAAf,KAAR;;AAEA,IAAA,KAAA,CAAA,cAAA,GAAiB,UAAA,IAAA,EAAA;AACf,MAAA,KAAA,CAAA,QAAA,CAAc,UAAA,KAAA,EAAA;AAAA,eACZC,KAAK,CAALA,WAAAA,KAAAA,IAAAA,GAAAA,IAAAA,GAAoC;AAAED,UAAAA,WAAW,EAAExE;AAAf,SADxB;AAAd,OAAA;AADF,KAAA,CAVF,CAUE;;;AAOA,IAAA,KAAA,CAAA,YAAA,GAAe,YAAA;AACb,MAAA,KAAA,CAAA,cAAA,CAAA,IAAA;AADF,KAAA;;AAYA,IAAA,KAAA,CAAA,qBAAA,GAAwB,UAAA,IAAA,EAAA,KAAA,EAAA;UACpBI,UAAAA,GAAAA,IAAAA,CAAAA,U;UAAYJ,IAAAA,GAAAA,IAAAA,CAAAA,I;wBAGgC,KAAA,CAAK6D,K;UAAjCc,aAAAA,GAAAA,WAAAA,CAAVtE,Q;UAAyB8D,QAAAA,GAAAA,WAAAA,CAAAA,Q;;AAEjC,UAAI,CAAJ,UAAA,EAAiB;AACf;AACD;;AAED,UAAMS,QAAQ,GAAG5E,IAAI,CAArB,OAAiBA,EAAjB;AACA,UAAI6E,QAAQ,GAAA,GAAA,MAAA,CAAZ,aAAY,CAAZ;;AACA,UAAIF,aAAa,CAAjB,MAAA,EAA0B;AACxB,YAAIA,aAAa,CAAbA,MAAAA,KAAJ,CAAA,EAAgC;AAC9B,cAAMG,SAAS,GAAGH,aAAa,CAAbA,CAAa,CAAbA,CAAlB,OAAkBA,EAAlB;;AACA,cAAIG,SAAS,GAAb,QAAA,EAA0B;AACxBD,YAAAA,QAAQ,CAARA,IAAAA,CAAAA,IAAAA;AADF,WAAA,MAEO;AACLA,YAAAA,QAAQ,CAARA,OAAAA,CAAAA,IAAAA;AACD;AANH,SAAA,MAOO,IAAIA,QAAQ,CAARA,MAAAA,KAAJ,CAAA,EAA2B;AAChCA,UAAAA,QAAQ,GAAG,CAAXA,IAAW,CAAXA;AACD;AAVH,OAAA,MAWO;AACLA,QAAAA,QAAQ,CAARA,IAAAA,CAAAA,IAAAA;AACD;;AAED,UAAA,QAAA,EAAc;AACZV,QAAAA,QAAQ,CAAA,KAAA,EAARA,QAAQ,CAARA;AACD;;AAED,UAAIU,QAAQ,CAARA,MAAAA,KAAJ,CAAA,EAA2B;AACzB,QAAA,KAAA,CAAA,cAAA,CAAA,IAAA;AACD;AAjCH,KAAA;;AAoCA,IAAA,KAAA,CAAA,oBAAA,GAAuB,UAAA,YAAA,EAAA,UAAA,EAAA,KAAA,EAAA;UAGnBE,YAAAA,GAAAA,KAAAA,CAAAA,Y;UAAcC,OAAAA,GAAAA,KAAAA,CAAAA,O;UAAYC,SAAAA,GAAAA,6BAAAA,CAAAA,KAAAA,EAAAA,CAAAA,cAAAA,EAAAA,SAAAA,CAAAA,C;;UAEpBT,WAAAA,GAAgB,KAAA,CAAKC,KAAL,CAAhBD,W;UACAxE,IAAAA,GAASiF,SAAS,CAACC,OAAVD,CAATjF,I;AACR,aAAOmF,YAAY,CAAA,QAAA,CAAA,EAAA,EAAA,SAAA,EAAA;AAEjBC,QAAAA,OAAO,EAAE7C,SAAS,CAAA,UAAA,EAFD,IAEC,CAFD;AAGjB8C,QAAAA,KAAK,EAAEC,UAAU,CAAVA,CAAU,CAAVA,IAAiBC,SAAS,CAACD,UAAU,CAAX,CAAW,CAAX,EAHhB,IAGgB,CAHhB;AAIjBE,QAAAA,GAAG,EAAEF,UAAU,CAAVA,CAAU,CAAVA,IAAiBC,SAAS,CAACD,UAAU,CAAX,CAAW,CAAX,EAJd,IAIc,CAJd;AAKjB;AACAG,QAAAA,OAAO,EAAEjB,WAAW,IAAIe,SAAS,CAAA,WAAA,EANhB,IAMgB,CANhB;AAOjBR,QAAAA,YAAY,EAAEjD,oBAAoB,CAAA,YAAA,EAAe,YAAA;AAC/C,UAAA,KAAA,CAAA,gBAAA,CAAA,IAAA;AARe,SAOiB,CAPjB;AAUjBkD,QAAAA,OAAO,EAAElD,oBAAoB,CAAA,OAAA,EAAU,YAAA;AACrC,UAAA,KAAA,CAAA,gBAAA,CAAA,IAAA;AAD2B,SAAA;AAVZ,OAAA,CAAA,CAAnB;AAPF,KAAA;;AAuBA,IAAA,KAAA,CAAA,oBAAA,GAAuB,UAAA,YAAA,EAAA,KAAA,EAAA;AAAA,aACrBkC,YAAY,CAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAEV0B,QAAAA,YAAY,EAAE,KAAA,CAAKA;AAFT,OAAA,CAAA,CADS;AAAvB,KAAA;;;AAkCD,GA1HKnB,CA0HL;;;;;SApGCG,gB,GAAAA,SAAAA,gBAAAA,CAAAA,IAAAA,EAAAA;AACE,QAAI,KAAA,KAAA,CAAA,QAAA,CAAA,MAAA,KAAJ,CAAA,EAAsC;AACpC;AACD;;AACD,SAAA,cAAA,CAAA,IAAA;AACD,G;;SAmEDf,M,GAAAA,SAAAA,MAAAA,GAAAA;;;uBACgC,KAAKE,K;QAA3BD,QAAAA,GAAAA,YAAAA,CAAAA,Q;QAAaJ,IAAAA,GAAAA,6BAAAA,CAAAA,YAAAA,EAAAA,CAAAA,UAAAA,CAAAA,C;;QACbgB,WAAAA,GAAgB,KAAKC,KAAL,CAAhBD,W;QACAnE,QAAAA,GAAa,KAAKwD,KAAL,CAAbxD,Q;AAER,QAAMiF,UAAU,GACdjF,QAAQ,CAARA,MAAAA,KAAAA,CAAAA,IAAyB,CAACA,QAAQ,CAAlCA,MAAAA,IAA6C,CAA7CA,WAAAA,GAAAA,QAAAA,GAAAA;AAGI;AACA,KAACA,QAAQ,CAAT,CAAS,CAAT,EAAA,WAAA,EAAA,IAAA,CALN,UAKM,CALN;AAOA,WACE,KAAA,CAAA,aAAA,CAAA,cAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAoBmD,IAApB,EAAoBA;AAAMa,MAAAA,cAAc,EAAE,KAAKC;AAA3Bd,KAApB,CAAA,EACG,UAAA,KAAA,EAAA;AAAA,UAAGQ,YAAH,GAAA,KAAA,CAAA,YAAA;AAAA,UAAiBmB,YAAjB,GAAA,KAAA,CAAA,YAAA;AAAA,UAAkCQ,WAAlC,GAAA,6BAAA,CAAA,KAAA,EAAA,CAAA,cAAA,EAAA,cAAA,CAAA,CAAA;;AAAA,aACC/B,QAAQ,CAAA,QAAA,CAAA,EAAA,EAAA,WAAA,EAAA;AAENI,QAAAA,YAAY,EAAE,MAAI,CAAJ,oBAAA,CAAA,IAAA,CAAA,MAAA,EAFR,YAEQ,CAFR;AAGNmB,QAAAA,YAAY,EAAE,MAAI,CAAJ,oBAAA,CAAA,IAAA,CAAA,MAAA,EAAA,YAAA,EAAA,UAAA;AAHR,OAAA,CAAA,CADT;AAFL,KACE,CADF;AAeD,G;;;CAzHGZ,CAAwB7B,KAAK,CAACC,SAA9B4B,C;;AAIGA,eAAAA,CAAAA,YAAAA,GAAe;AACpBlE,EAAAA,QAAQ,EAAE;AADU,CAAfkE;;ACZT,IAAMqB,YAAY,GAAG,SAAfA,YAAe,CAAA,IAAA,EAAA;AAAA,MAAGC,IAAH,GAAA,IAAA,CAAA,IAAA;AAAA,MAAYC,UAAZ,GAAA,6BAAA,CAAA,IAAA,EAAA,CAAA,MAAA,CAAA,CAAA;;AAAA,SACnBpD,KAAAA,CAAAA,aAAAA,CAAAA,MAAAA,EAAAA,MAAAA,CAAAA,MAAAA,CAAAA;AAAQqD,IAAAA,KAAK,EAAA,IAAbrD;AAAcsD,IAAAA,OAAO,EAAA,IAArBtD;AAAsBmD,IAAAA,IAAI,EAAEA;AAA5BnD,GAAAA,EADmB,UACnBA,CAAAA,CADmB;AAArB,CAAA;;ACHA,SAAS,WAAT,CAAqB,GAArB,EAA0B,GAA1B,EAA+B;AAC7B,MAAK,GAAG,KAAK,KAAK,CAAlB,EAAsB,GAAG,GAAG,EAAN;AACtB,MAAI,QAAQ,GAAG,GAAG,CAAC,QAAnB;;AAEA,MAAI,CAAC,GAAD,IAAQ,OAAO,QAAP,KAAoB,WAAhC,EAA6C;AAAE;AAAS;;AAExD,MAAI,IAAI,GAAG,QAAQ,CAAC,IAAT,IAAiB,QAAQ,CAAC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAA5B;AACA,MAAI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAZ;AACA,EAAA,KAAK,CAAC,IAAN,GAAa,UAAb;;AAEA,MAAI,QAAQ,KAAK,KAAjB,EAAwB;AACtB,QAAI,IAAI,CAAC,UAAT,EAAqB;AACnB,MAAA,IAAI,CAAC,YAAL,CAAkB,KAAlB,EAAyB,IAAI,CAAC,UAA9B;AACD,KAFD,MAEO;AACL,MAAA,IAAI,CAAC,WAAL,CAAiB,KAAjB;AACD;AACF,GAND,MAMO;AACL,IAAA,IAAI,CAAC,WAAL,CAAiB,KAAjB;AACD;;AAED,MAAI,KAAK,CAAC,UAAV,EAAsB;AACpB,IAAA,KAAK,CAAC,UAAN,CAAiB,OAAjB,GAA2B,GAA3B;AACD,GAFD,MAEO;AACL,IAAA,KAAK,CAAC,WAAN,CAAkB,QAAQ,CAAC,cAAT,CAAwB,GAAxB,CAAlB;AACD;AACF;;;;;ACPD,IAAMuD,YAAY,GAAgC,SAA5CA,YAA4C,CAAA,IAAA,EAAA;AAAA,MAGhDb,OAHgD,GAAA,IAAA,CAAA,OAAA;AAAA,MAIhDc,QAJgD,GAAA,IAAA,CAAA,QAAA;AAAA,MAKhDhG,SALgD,GAAA,IAAA,CAAA,SAAA;AAAA,MAMhDC,SANgD,GAAA,IAAA,CAAA,SAAA;AAAA,MAOhDC,UAPgD,GAAA,IAAA,CAAA,UAAA;AAAA,MAQhDC,QARgD,GAAA,IAAA,CAAA,QAAA;AAAA,MAUhDN,KAVgD,GAAA,IAAA,CAAA,KAAA;AAAA,MAW7C+F,UAX6C,GAAA,6BAAA,CAAA,IAAA,EAAA,CAAA,KAAA,EAAA,SAAA,EAAA,SAAA,EAAA,UAAA,EAAA,WAAA,EAAA,WAAA,EAAA,YAAA,EAAA,UAAA,EAAA,OAAA,EAAA,OAAA,CAAA,CAAA;;AAAA,SAahDpD,KAAAA,CAAAA,aAAAA,CAAAA,MAAAA,EAAAA,MAAAA,CAAAA,MAAAA,CAAAA;AACEyD,IAAAA,SAAS,EAAEC,EAAE,CAAA,YAAA,EAAe;AAC1BF,MAAAA,QAAQ,EADkB,QAAA;AAE1B,0BAF0B,KAAA;AAG1B,6BAAuB,CAHG,UAAA;AAI1B,gCAA0BhG,SAAS,IAJT,SAAA;AAK1B,4BAL0B,OAAA;AAM1B,6BAAuBG;AANG,KAAf;AADfqC,GAAAA,EAbgD,UAahDA,CAAAA,CAbgD;AAAlD,CAAA;;AA0BAuD,YAAY,CAAZA,YAAAA,GAA4B;AAC1BT,EAAAA,GAAG,EADuB,KAAA;AAE1BC,EAAAA,OAAO,EAFmB,KAAA;AAG1BL,EAAAA,OAAO,EAHmB,KAAA;AAI1BlF,EAAAA,SAAS,EAJiB,KAAA;AAK1BC,EAAAA,SAAS,EALiB,KAAA;AAM1BkF,EAAAA,KAAK,EAAE;AANmB,CAA5BY;ACjCA,IAAMI,KAAK,GAAwB;AAAEC,EAAAA,SAAS,EAAE;AAAb,CAAnC;;AAEA,IAAMC,WAAW,GAA+B,SAA1CA,WAA0C,CAAA,IAAA,EAAA;AAAA,MAU3CT,UAV2C,GAAA,6BAAA,CAAA,IAAA,EAAA,CAAA,KAAA,EAAA,SAAA,EAAA,SAAA,EAAA,WAAA,EAAA,WAAA,EAAA,YAAA,EAAA,UAAA,EAAA,OAAA,EAAA,OAAA,CAAA,CAAA;;AAAA,SAY9CpD,KAAAA,CAAAA,aAAAA,CAAAA,MAAAA,EAAAA,MAAAA,CAAAA,MAAAA,CAAAA;AACEyD,IAAAA,SAAS,EAAC,oBADZzD;AAEEsD,IAAAA,OAAO,EAAA,IAFTtD;mBAGc,yBAHdA;AAIE8D,IAAAA,KAAK,EAAA,IAJP9D;AAKE2D,IAAAA,KAAK,EAAEA;AALT3D,GAAAA,EAZ8C,UAY9CA,CAAAA,CAZ8C;AAAhD,CAAA;;;;ACcA,IAAM+D,MAAM,GAA2C;AACrDC,EAAAA,OAAO,EAAE;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAD4C;AAErDC,EAAAA,QAAQ,EAAE;AAAED,IAAAA,SAAS,EAAE;AAAb;AAF2C,CAAvD;AAKA,IAAME,SAAS,GAAG;AAChB,cADgB,sBAAA;AAEhB,eAFgB,uBAAA;AAGhBhE,EAAAA,IAAI,EAHY,YAAA;AAIhBC,EAAAA,KAAK,EAAE;AAJS,CAAlB;;AAOA,IAAMgE,QAAQ,GAA4B,SAApCA,QAAoC,CAAA,IAAA,EAAA;AAAA,MAAA,GAAA;;AAAA,MACxCC,SADwC,GAAA,IAAA,CAAA,SAAA;AAAA,MAExCC,UAFwC,GAAA,IAAA,CAAA,UAAA;AAAA,MAGxCC,YAHwC,GAAA,IAAA,CAAA,YAAA;AAAA,MAIxC9B,YAJwC,GAAA,IAAA,CAAA,YAAA;AAAA,MAKxC+B,eALwC,GAAA,IAAA,CAAA,eAAA;AAAA,MAMxCC,MANwC,GAAA,IAAA,CAAA,MAAA;AAAA,MAOxCjB,QAPwC,GAAA,IAAA,CAAA,QAAA;AAAA,MAQxCrG,OARwC,GAAA,IAAA,CAAA,OAAA;AAAA,MASxCF,OATwC,GAAA,IAAA,CAAA,OAAA;AAAA,MAUxCyH,MAVwC,GAAA,IAAA,CAAA,MAAA;AAAA,MAWxClH,SAXwC,GAAA,IAAA,CAAA,SAAA;AAAA,MAYxCmH,QAZwC,GAAA,IAAA,CAAA,QAAA;AAAA,MAaxCC,aAbwC,GAAA,IAAA,CAAA,aAAA;AAAA,MAcxCC,YAdwC,GAAA,IAAA,CAAA,YAAA;AAAA,MAexCC,SAfwC,GAAA,IAAA,CAAA,SAAA;AAAA,MAgBxCC,WAhBwC,GAAA,IAAA,CAAA,WAAA;AAAA,MAiBxCC,QAjBwC,GAAA,IAAA,CAAA,QAAA;AAAA,MAkBxCC,QAlBwC,GAAA,IAAA,CAAA,QAAA;AAAA,SAoBxC,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AACEzB,IAAAA,QAAQ,EAAEA,QADZ;AAEEC,IAAAA,SAAS,EAAEC,EAAE,CAAA,yBAAA,GAAA,GAAA,GAAA;AACX,wBAAkB,CAACe;AADR,KAAA,EAAA,GAAA,CAEVN,SAAS,CAFC,QAED,CAFC,CAAA,GAEY,CAFZ,MAAA,EAAA,GAAA;AAFf,GAAA,EAOE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACEV,IAAAA,SAAS,EAAC,yBADZ;AAEEE,IAAAA,KAAK,EAAE;AAAE,aAAOU,SAAS,CAACa;AAAnB;AAFT,GAAA,EAIG,SAAS,CAAT,GAAA,CAAc,UAAA,QAAA,EAAA,WAAA,EAAA;AAAA,WACb,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAKC,MAAAA,GAAG,EAAKC,QAAQ,CAAb,IAAKA,GAAL,GAAKA,GAAiBA,QAAQ,CAACC;AAAvC,KAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK5B,MAAAA,SAAS,EAAC;AAAf,KAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAKE,MAAAA,KAAK,EAAEI,MAAM,CAACC;AAAnB,KAAA,EACGsB,WAAW,KAAXA,CAAAA,IACC,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA,MAAA,CAAA,MAAA,CAAA;AACEnC,MAAAA,IAAI,EAAC,mBADP;AAEEK,MAAAA,QAAQ,EAAEA,QAFZ;AAGE+B,MAAAA,KAAK,EAAEV;AAHT,KAAA,EAIMN,YAAY,CAAC;AAAEF,MAAAA,SAAS,EAAX,SAAA;AAAanE,MAAAA,MAAM,EAAE;AAArB,KAAD,CAJlB,CAAA,CADF,EAOE,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA,MAAA,CAAA,MAAA,CAAA;AACEiD,MAAAA,IAAI,EAAC,YADP;AAEEK,MAAAA,QAAQ,EAAEA,QAFZ;AAGEG,MAAAA,KAAK,EAAE;AAAE6B,QAAAA,WAAW,EAAE;AAAf,OAHT;AAIED,MAAAA,KAAK,EAAEX;AAJT,KAAA,EAKML,YAAY,CAAC;AAAEF,MAAAA,SAAS,EAATA;AAAF,KAAD,CALlB,CAAA,CAPF,CAFJ,CADF,EAqBE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAMkB,MAAAA,KAAK,EAAKb,MAAM,CAACU,QAAQ,CAApB,KAAW,CAANV,GAAL,GAAKA,GAA0BU,QAAQ,CAACK;AAAnD,KAAA,EACGf,MAAM,CAACU,QAAQ,CAAfV,KAAM,CAANA,CAAAA,KAAAA,CAAAA,CAAAA,EADH,CACGA,CADH,EAAA,GAAA,EACwCU,QAAQ,CAtBlD,IAqBE,CArBF,EAyBE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAKzB,MAAAA,KAAK,EAAEI,MAAM,CAACG;AAAnB,KAAA,EACGoB,WAAW,KAAKjB,SAAS,CAATA,MAAAA,GAAhBiB,CAAAA,IACC,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA,MAAA,CAAA,MAAA,CAAA;AACEnC,MAAAA,IAAI,EAAC,aADP;AAEEK,MAAAA,QAAQ,EAAEA,QAFZ;AAGE+B,MAAAA,KAAK,EAAE/H;AAHT,KAAA,EAIMgH,eAAe,CAAC;AAAEH,MAAAA,SAAS,EAATA;AAAF,KAAD,CAJrB,CAAA,CADF,EAOE,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA,MAAA,CAAA,MAAA,CAAA;AACElB,MAAAA,IAAI,EAAC,oBADP;AAEEK,MAAAA,QAAQ,EAAEA,QAFZ;AAGEG,MAAAA,KAAK,EAAE;AAAE6B,QAAAA,WAAW,EAAE;AAAf,OAHT;AAIED,MAAAA,KAAK,EAAEZ;AAJT,KAAA,EAKMH,eAAe,CAAC;AAAEH,MAAAA,SAAS,EAAX,SAAA;AAAanE,MAAAA,MAAM,EAAE;AAArB,KAAD,CALrB,CAAA,CAPF,CAFJ,CAzBF,CADF,EA8CE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAKuD,MAAAA,SAAS,EAAC;AAAf,KAAA,EACG,QAAQ,CAAR,GAAA,CAAa,UAAA,OAAA,EAAA;AAAA,aACZ,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA;AACE0B,QAAAA,GAAG,EAAKC,QAAQ,CAAb,IAAKA,GAAL,GAAKA,GAAiBA,QAAQ,CAA9B,KAAKA,GAAL,GAAKA,GAAmCM,OAD7C;AAEElC,QAAAA,QAAQ,EAAEA,QAFZ;AAGE+B,QAAAA,KAAK,EAAEG;AAHT,OAAA,EAKGA,OAAO,CAAPA,KAAAA,CAAAA,CAAAA,EANS,CAMTA,CALH,CADY;AADhB,KACG,CADH,EAUG,QAAQ,CAAR,KAAA,CAAA,GAAA,CAAmB,UAAA,IAAA,EAAA;AAAA,aAClB,IAAI,CAAJ,GAAA,CAAS,UAAA,OAAA,EAAA,OAAA,EAAA;AACP,YAAMP,GAAG,GAAMC,QAAQ,CAAd,IAAMA,GAAN,GAAMA,GAAiBA,QAAQ,CAA/B,KAAMA,GAAN,GAAMA,GAAf,OAAA;;AAEA,YAAI,CAAJ,OAAA,EAAc;AACZ,iBAAO,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA;AAAcD,YAAAA,GAAG,EAAEA,GAAnB;AAAwB3B,YAAAA,QAAQ,EAAEA;AAAlC,WAAA,CAAP;AACD;;AAED,YAAM9F,UAAU,GACd8E,OAAO,CAAPA,UAAAA,IAAsB8B,UAAU,CAAC9B,OAAO,CAD1C,IACkC,CADlC;AAEA,YAAMmD,SAAS,GAAGxG,YAAY,CAACqD,OAAO,CAAtC,IAA8B,CAA9B;AAEA,eACE,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA,MAAA,CAAA,MAAA,CAAA;AACE2C,UAAAA,GAAG,EAAEA;AADP,SAAA,EAEM3C,OAFN,EAGMC,YAAY,CAAC;AAAED,UAAAA,OAAO,EAAA,QAAA,CAAA,EAAA,EAAA,OAAA,EAAA;AAAgB9E,YAAAA,UAAU,EAAVA;AAAhB,WAAA;AAAT,SAAD,CAHlB,EAGkB;8CACgBiI,SADhB;AAEhBnC,UAAAA,QAAQ,EAAEA,QAFM;AAGhB9F,UAAAA,UAAU,EAAEA;AAHI,SAHlB,CAAA,EAQG8E,OAAO,CAAPA,IAAAA,CATL,OASKA,EARH,CADF;AAZgB,OAClB,CADkB;AAzDX,KAyDR,CAVH,CA9CF,CADa;AAXnB,GAWK,CAJH,CAPF,EAkGGsC,SAAS,IACR,KAAA,CAAA,aAAA,CAAA,WAAA,EAAA,MAAA,CAAA,MAAA,CAAA;AACEtB,IAAAA,QAAQ,EAAEA;AADZ,GAAA,EAEMpG,QAAQ,CAAA,OAAA,EAAA,OAAA,CAFd,EAGMqF,YAAY,CAAC;AACfD,IAAAA,OAAO,EAAEpF,QAAQ,CAAA,OAAA,EAAA,OAAA;AADF,GAAD,CAHlB,CAAA,EAvHoC,WAuHpC,CAnGJ,CApBwC;AAA1C,CAAA;;AC3BA,IAAMwI,UAAU,GAAG,SAAbA,UAAa,CAAA,IAAA,EAAA;MACjBC,SAAAA,GAAAA,IAAAA,CAAAA,S;MACA1C,IAAAA,GAAAA,IAAAA,CAAAA,I;MACA2C,kBAAAA,GAAAA,IAAAA,CAAAA,kB;MACAC,OAAAA,GAAAA,IAAAA,CAAAA,O;MACAC,OAAAA,GAAAA,IAAAA,CAAAA,O;;AAEA,MAAIF,kBAAkB,IAAlBA,SAAAA,IAAmC9F,KAAK,CAALA,cAAAA,CAAvC,SAAuCA,CAAvC,EAAwE;AACtE,WAAO,KAAK,CAAL,YAAA,CAAA,SAAA,EAA8B;AACnC,qBADmC,iBAAA;AAEnCgG,MAAAA,OAAO,EAAED;AAF0B,KAA9B,CAAP;AAID;;AAED,MAAID,kBAAkB,IAAlBA,SAAAA,IAAmC,CAAC9F,KAAK,CAALA,cAAAA,CAAxC,SAAwCA,CAAxC,EAAyE;AACvE,WACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;qBACc,iBADd;AAEEiG,MAAAA,IAAI,EAAA,IAFN;AAGEC,MAAAA,IAAI,EAAEL,SAHR;AAIEG,MAAAA,OAAO,EAAED;AAJX,KAAA,CADF;AAQD;;AAED,MAAI5C,IAAI,IAAInD,KAAK,CAALA,cAAAA,CAAZ,IAAYA,CAAZ,EAAwC;AACtC,WAAO,KAAK,CAAL,YAAA,CAAA,IAAA,EAAyB;AAC9B,qBAD8B,iBAAA;AAE9BgG,MAAAA,OAAO,EAAPA;AAF8B,KAAzB,CAAP;AAID;;AAED,SACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;mBAAqB,iBAArB;AAAuCC,IAAAA,IAAI,EAAA,IAA3C;AAA4CC,IAAAA,IAAI,EAAE/C,IAAlD;AAAwD6C,IAAAA,OAAO,EAAEA;AAAjE,GAAA,CADF;AAhCF,CAAA;;ACDA,IAAMG,WAAW,GAAA,aAAG,KAAK,CAAL,UAAA,CAAoC,UAAA,KAAA,EAAA,GAAA,EAAA;MAEpDN,SAAAA,GASE1E,KAAAA,CATF0E,S;MACA1C,IAAAA,GAQEhC,KAAAA,CARFgC,I;MACA2C,kBAAAA,GAOE3E,KAAAA,CAPF2E,kB;MACAM,KAAAA,GAMEjF,KAAAA,CANFiF,K;MACAL,OAAAA,GAKE5E,KAAAA,CALF4E,O;MACAC,OAAAA,GAIE7E,KAAAA,CAJF6E,O;MACAK,QAAAA,GAGElF,KAAAA,CAHFkF,Q;MACAnH,KAAAA,GAEEiC,KAAAA,CAFFjC,K;MACG4B,IAAAA,GAAAA,6BAAAA,CACDK,KADCL,EACDK,CAAAA,WAAAA,EAAAA,MAAAA,EAAAA,oBAAAA,EAAAA,OAAAA,EAAAA,SAAAA,EAAAA,SAAAA,EAAAA,UAAAA,EAAAA,OAAAA,CADCL,C;;AAGL,SACE,KAAA,CAAA,aAAA,CAACwF,IAAI,CAAL,KAAA,EAAA;AAAYD,IAAAA,QAAQ,EAAEA;AAAtB,GAAA,EACGD,KAAK,IAAI,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AAAOG,IAAAA,OAAO,EAAEzF,IAAI,CAAC0F;AAArB,GAAA,EADZ,KACY,CADZ,EAEE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,MAAA,CAAA,MAAA,CAAA;mBACc;AADd,GAAA,EAEM1F,IAFN,EAEMA;AACJ2F,IAAAA,GAAG,EAAEA,GADD3F;AAEJuF,IAAAA,QAAQ,EAAEA,QAFNvF;AAGJqC,IAAAA,IAAI,EACF,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA;AACE0C,MAAAA,SAAS,EAAEA,SADb;AAEE1C,MAAAA,IAAI,EAAEA,IAFR;AAGE2C,MAAAA,kBAAkB,EAAEA,kBAHtB;AAIEC,MAAAA,OAAO,EAAEA,OAJX;AAKEC,MAAAA,OAAO,EAAEA;AALX,KAAA,CAJElF;AAYJkF,IAAAA,OAAO,EAAEA,OAZLlF;AAaJ5B,IAAAA,KAAK,EAAEA;AAbH4B,GAFN,CAAA,CAFF,CADF;AAbF,CAAoB,CAApB;ACQA,IAAM6C,OAAK,GAAwB;AACjC+C,EAAAA,OAAO,EAD0B,cAAA;AAEjCC,EAAAA,QAAQ,EAAE;AAFuB,CAAnC;AAIA,IAAMC,kBAAkB,GAAG,CAAA,cAAA,EAAA,WAAA,EAAA,WAAA,EAAA,UAAA,EAAA,OAAA,EAAA,MAAA,EAAA,cAAA,EAAA,IAAA,EAAA,OAAA,EAAA,SAAA,EAAA,MAAA,EAAA,QAAA,EAAA,UAAA,EAAA,SAAA,EAAA,eAAA,EAAA,eAAA,EAAA,SAAA,EAAA,SAAA,EAAA,WAAA,EAAA,YAAA,EAAA,SAAA,EAAA,aAAA,EAAA,cAAA,EAAA,cAAA,EAAA,aAAA,EAAA,YAAA,EAAA,aAAA,EAAA,WAAA,EAAA,aAAA,EAAA,UAAA,EAAA,MAAA,EAAA,aAAA,EAA3B,UAA2B,CAA3B;;IA4CMC,kBAAAA,GAAAA,aAAAA,UAAAA,gBAAAA,EAAAA;;;AAAN,WAAA,kBAAA,GAAA;;;;AAmCE,IAAA,KAAA,CAAA,EAAA,GAAK7G,KAAK,CAAV,SAAKA,EAAL;AACA,IAAA,KAAA,CAAA,QAAA,GAAWA,KAAK,CAAhB,SAAWA,EAAX;AA+EA,IAAA,KAAA,CAAA,KAAA,GAAQ,KAAA,CAAR,YAAA;AAEA,IAAA,KAAA,CAAA,SAAA,GAA+B,KAAA,CAAA,YAAA,GAAA,eAAA,GAA/B,UAAA;;AAIA,IAAA,KAAA,CAAA,UAAA,GAAa,UAAA,KAAA,EAAA;wBAC2B,KAAA,CAAKmB,K;UAAnC+F,eAAAA,GAAAA,WAAAA,CAAAA,e;UAAiBzF,QAAAA,GAAAA,WAAAA,CAAAA,Q;AACzB,UAAM0G,QAAQ,GAAG;AACfN,QAAAA,SAAS,EADM,eAAA;AAEfrG,QAAAA,YAAY,EAAE,KAAA,CAAA,YAAA,GAAA,EAAA,GAFC,IAAA;AAGfsG,QAAAA,qBAAqB,EAAE;AAHR,OAAjB;;AAMA,MAAA,KAAA,CAAA,QAAA,CAAA,QAAA,EAAwB,YAAA;AACtBrG,QAAAA,QAAQ,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EAAa,KAAA,CAAb,KAAA,EAAA;AAAyBvC,UAAAA,KAAK,EAAE;AAAhC,SAAA,CAAA,CAARuC;AADF,OAAA;AARF,KAAA;;AAaA,IAAA,KAAA,CAAA,UAAA,GAAa,UAAA,KAAA,EAAA;AACX,MAAA,KAAA,CAAA,UAAA,CAAA,KAAA;;AACA,MAAA,KAAA,CAAA,UAAA,CAAA,KAAA;AAFF,KAAA;;AAKA,IAAA,KAAA,CAAA,WAAA,GAAc,UAAA,cAAA,EAAA;UACJoG,SAAAA,GAAc,KAAA,CAAK9F,KAAL,CAAd8F,S;;AAER,UAAIA,SAAS,IAAI,KAAA,CAAjB,EAAA,EAA0B;AACxB,YAAI,KAAA,CAAA,EAAA,CAAA,OAAA,IAAmB,CAAC,KAAA,CAAA,EAAA,CAAA,OAAA,CAAA,QAAA,CAAyBO,cAAc,CAA/D,MAAwB,CAAxB,EAAyE;AACvE,UAAA,KAAA,CAAA,KAAA,CAAA,cAAA;AACD;AACF;AAPH,KAAA;;AAUA,IAAA,KAAA,CAAA,SAAA,GAAY,UAAA,YAAA,EAAA;UACFP,SAAAA,GAAc,KAAA,CAAK9F,KAAL,CAAd8F,S;;AACR,UAAIQ,YAAY,CAAZA,OAAAA,KAAAA,EAAAA,IAAJ,SAAA,EAA8C;AAC5C;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,YAAA;AACD;AALH,KAAA;;AAQA,IAAA,KAAA,CAAA,KAAA,GAAQ,UAAA,KAAA,EAAA;AACNC,MAAAA,MAAM,CAANA,mBAAAA,CAAAA,SAAAA,EAAsC,KAAA,CAAtCA,SAAAA;AACAA,MAAAA,MAAM,CAANA,mBAAAA,CAAAA,WAAAA,EAAwC,KAAA,CAAxCA,WAAAA;;AAEA,MAAA,KAAA,CAAA,UAAA,CAAA,KAAA;;AACA,MAAA,KAAA,CAAA,QAAA,CAAc;AACZT,QAAAA,SAAS,EAAE;AADC,OAAd;AALF,KAAA;;AAUA,IAAA,KAAA,CAAA,YAAA,GAAe,YAAA;;;AACb,UAAA,CAAA,cAAA,GAAI,KAAA,CAAJ,QAAA,MAAA,IAAA,IAAA,cAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,qBAAA,GAAI,cAAA,CAAJ,OAAA,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAI,qBAAA,CAAJ,KAAA,EAAmC;AACjC,QAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,KAAA;AACD;AAHH,KAAA;;AAMA,IAAA,KAAA,CAAA,YAAA,GAAe,UAAA,KAAA,EAAA;AACbrI,MAAAA,KAAK,CAALA,cAAAA;AACA8I,MAAAA,MAAM,CAANA,gBAAAA,CAAAA,WAAAA,EAAqC,KAAA,CAArCA,WAAAA;AACAA,MAAAA,MAAM,CAANA,gBAAAA,CAAAA,SAAAA,EAAmC,KAAA,CAAnCA,SAAAA;;AAEA,MAAA,KAAA,CAAA,YAAA;;AACA,MAAA,KAAA,CAAA,QAAA,CAAc;AACZT,QAAAA,SAAS,EAAE;AADC,OAAd;AANF,KAAA;;AAWA,IAAA,KAAA,CAAA,gBAAA,GAAmB,UAAA,QAAA,EAAA,KAAA,EAAA,QAAA,EAAA;UAAkBU,QAAAA,KAAAA,KAAAA,C,EAAAA;AAAAA,QAAAA,QAAAA,GAAW,KAAXA;;;yBACY,KAAA,CAAKpH,K;UAA5CtD,MAAAA,GAAAA,YAAAA,CAAAA,M;UAAQsJ,gBAAAA,GAAAA,YAAAA,CAAAA,gB;UAAkB1F,QAAAA,GAAAA,YAAAA,CAAAA,Q;;AAElC,UAAI,CAAA,QAAA,IAAa,CAACU,QAAQ,CAA1B,MAAA,EAAmC;AACjC,QAAA,KAAA,CAAA,UAAA,CAAA,KAAA;;AAEA,YAAI,CAAJ,QAAA,EAAe;AACb,UAAA,KAAA,CAAA,UAAA,CAAA,KAAA;AACD;;AAED;AACD;;AAED,UAAMgG,QAAQ,GAAG;AACf3G,QAAAA,YAAY,EADG,QAAA;AAEfsG,QAAAA,qBAAqB,EAAEvJ,kBAAkB,CAAA,QAAA,EAF1B,MAE0B,CAF1B;AAGfS,QAAAA,UAAU,EAAE;AAHG,OAAjB;;AAMA,MAAA,KAAA,CAAA,QAAA,CAAA,QAAA,EAAwB,YAAA;AACtByC,QAAAA,QAAQ,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EAAa,KAAA,CAAb,KAAA,EAAA;AAAyBvC,UAAAA,KAAK,EAAEiD;AAAhC,SAAA,CAAA,CAARV;;AAEA,YAAIU,QAAQ,CAARA,MAAAA,KAAJ,CAAA,EAA2B;AACzB,UAAA,KAAA,CAAA,QAAA,CAAc;AAAE0F,YAAAA,SAAS,EAAEV;AAAb,WAAd;;AAEA,cAAA,gBAAA,EAAsB;AACpB,YAAA,KAAA,CAAA,YAAA;AADF,WAAA,MAEO,IAAI,CAAJ,QAAA,EAAe;AACpB,YAAA,KAAA,CAAA,UAAA,CAAA,KAAA;AACD;AAPH,SAAA,MAQO,IAAIhF,QAAQ,CAARA,MAAAA,KAAJ,CAAA,EAA2B;AAChC,UAAA,KAAA,CAAA,YAAA;AADK,SAAA,MAEA,IAAI,CAAJ,QAAA,EAAe;AACpB,UAAA,KAAA,CAAA,UAAA,CAAA,KAAA;AACD;AAfH,OAAA;AAnBF,KAAA;;AAsCA,IAAA,KAAA,CAAA,gBAAA,GAAmB,UAAA,OAAA,EAAA,KAAA,EAAA,QAAA,EAAA;UAAiBoG,QAAAA,KAAAA,KAAAA,C,EAAAA;AAAAA,QAAAA,QAAAA,GAAW,KAAXA;;;yBAM9B,KAAA,CAAKpH,K;UAJPtD,MAAAA,GAAAA,YAAAA,CAAAA,M;UACAsJ,gBAAAA,GAAAA,YAAAA,CAAAA,gB;UACA1F,QAAAA,GAAAA,YAAAA,CAAAA,Q;UACAsF,oBAAAA,GAAAA,YAAAA,CAAAA,oB;;AAGF,UAAI,CAAJ,OAAA,EAAc;AACZ;AACA;AACA;AACA,YAAA,oBAAA,EAA0B;AACxB,UAAA,KAAA,CAAA,UAAA,CAAA,KAAA;;AAEA,cAAI,CAAJ,QAAA,EAAe;AACb,YAAA,KAAA,CAAA,UAAA,CAAA,KAAA;AACD;AALH,SAAA,MAMO;AACL;AACA;AACA;AACA;AACA,UAAA,KAAA,CAAA,QAAA,CAAc;AACZc,YAAAA,SAAS,EAAEV;AADC,WAAd;;AAIA,cAAA,gBAAA,EAAsB;AACpB,YAAA,KAAA,CAAA,YAAA;AADF,WAAA,MAEO,IAAI,CAAJ,QAAA,EAAe;AACpB,YAAA,KAAA,CAAA,UAAA,CAAA,KAAA;AACD;AACF;;AAED;AACD;;AAED,UAAMgB,QAAQ,GAAG;AACfN,QAAAA,SAAS,EADM,gBAAA;AAEfrG,QAAAA,YAAY,EAFG,OAAA;AAGfsG,QAAAA,qBAAqB,EAAEvJ,kBAAkB,CAAA,OAAA,EAH1B,MAG0B,CAH1B;AAIfS,QAAAA,UAAU,EAAE;AAJG,OAAjB;;AAOA,UAAA,gBAAA,EAAsB;AACpB,QAAA,KAAA,CAAA,YAAA;AADF,OAAA,MAEO,IAAI,CAAJ,QAAA,EAAe;AACpB,QAAA,KAAA,CAAA,UAAA,CAAA,KAAA;AACD;;AAED,MAAA,KAAA,CAAA,QAAA,CAAA,QAAA,EAAwB,YAAA;AACtByC,QAAAA,QAAQ,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EAAa,KAAA,CAAb,KAAA,EAAA;AAAyBvC,UAAAA,KAAK,EAAEwC;AAAhC,SAAA,CAAA,CAARD;AADF,OAAA;AAlDF,KAAA;;AAuDA,IAAA,KAAA,CAAA,UAAA,GAAa,UAAA,KAAA,EAAA;yBAC0B,KAAA,CAAKN,K;UAAlCtD,MAAAA,GAAAA,YAAAA,CAAAA,M;UAAQwJ,MAAAA,GAAAA,YAAAA,CAAAA,M;UAAQ5F,QAAAA,GAAAA,YAAAA,CAAAA,Q;UAChBzC,UAAAA,GAAe,KAAA,CAAK+C,KAAL,CAAf/C,U;AAERqI,MAAAA,MAAM,CAANA,KAAM,CAANA;;AAEA,UAAI,CAAJ,UAAA,EAAiB;AACf;AACD;;AAED,UAAI,KAAA,CAAJ,YAAA,EAAuB;AACrB,YAAMmB,WAAW,GAAG3J,gBAAgB,CAAC4J,MAAM,CAAP,UAAO,CAAP,EAApC,MAAoC,CAApC;AACA,YAAMC,aAAa,GAAGF,WAAW,CAAXA,KAAAA,CAAtB,OAAsBA,CAAtB;;AAEA,YAAA,aAAA,EAAmB;AACjB,UAAA,KAAA,CAAA,gBAAA,CAAA,WAAA,EAAA,KAAA,EAAA,IAAA;;AACA;AACD;AAPH,OAAA,MAQO;AACL,YAAMA,YAAW,GAAG7J,WAAW,CAAC8J,MAAM,CAAP,UAAO,CAAP,EAA/B,MAA+B,CAA/B;;AACA,YAAME,WAAW,GAAGC,OAAO,CAA3B,YAA2B,CAA3B;;AAEA,YAAA,WAAA,EAAiB;AACf,UAAA,KAAA,CAAA,gBAAA,CAAA,YAAA,EAAA,KAAA,EAAA,IAAA;;AACA;AACD;AACF;;AAED,MAAA,KAAA,CAAA,QAAA,CAAc;AAAE5J,QAAAA,UAAU,EAAE;AAAd,OAAd,EAAoC,YAAA;AAClCyC,QAAAA,QAAQ,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EAAa,KAAA,CAAb,KAAA,EAAA;AAAyBvC,UAAAA,KAAK,EAAE;AAAhC,SAAA,CAAA,CAARuC;AADF,OAAA;AA5BF,KAAA;;AAiCA,IAAA,KAAA,CAAA,YAAA,GAAe,UAAA,KAAA,EAAA,IAAA,EAAA;UAAgCvC,KAAAA,GAAAA,IAAAA,CAAAA,K;yBACE,KAAA,CAAKiC,K;UAA5C2F,gBAAAA,GAAAA,YAAAA,CAAAA,gB;UAAkBjJ,MAAAA,GAAAA,YAAAA,CAAAA,M;UAAQ4D,QAAAA,GAAAA,YAAAA,CAAAA,Q;AAClC,UAAMoH,YAAY,GAAG,KAAA,CAAA,YAAA,GAAuBhL,MAAvB,GAAA,KAAuBA,GAAvB,MAAA,GAArB,MAAA;AACA,UAAMmB,UAAU,GAAG8H,gBAAgB,GAAG7H,WAAW,CAAd,KAAc,CAAd,GAAnC,KAAA;;AAEA,UAAI,CAAJ,UAAA,EAAiB;AACf,YAAMkJ,QAAQ,GAAG;AACf3G,UAAAA,YAAY,EAAE,KAAA,CAAA,YAAA,GAAA,EAAA,GADC,IAAA;AAEfsG,UAAAA,qBAAqB,EAFN,EAAA;AAGf9I,UAAAA,UAAU,EAAE;AAHG,SAAjB;;AAMA,QAAA,KAAA,CAAA,QAAA,CAAA,QAAA,EAAwB,YAAA;AACtByC,UAAAA,QAAQ,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EAAa,KAAA,CAAb,KAAA,EAAA;AAAyBvC,YAAAA,KAAK,EAAE;AAAhC,WAAA,CAAA,CAARuC;AADF,SAAA;;AAIA;AACD;;AAED,MAAA,KAAA,CAAA,QAAA,CAAc;AACZD,QAAAA,YAAY,EAAE,KAAA,CAAA,YAAA,GAAA,EAAA,GADF,IAAA;AAEZsG,QAAAA,qBAAqB,EAFT,EAAA;AAGZ9I,QAAAA,UAAU,EAAE8J,qBAAqB,CAAA,YAAA,EAAA,UAAA;AAHrB,OAAd;AAnBF,KAAA;;AA0BA,IAAA,KAAA,CAAA,aAAA,GAAgB,UAAA,GAAA,EAAA;AACd;AACA,UAAIC,GAAG,CAAHA,OAAAA,KAAJ,EAAA,EAAwB;AACtB,QAAA,KAAA,CAAA,UAAA;AACD;AAJH,KAAA;;AAOA,IAAA,KAAA,CAAA,cAAA,GAAiB,UAAA,KAAA,EAAA,WAAA,EAAA;AACf,UAAI,KAAA,CAAJ,YAAA,EAAuB;AACrB,QAAA,KAAA,CAAA,gBAAA,CAAA,WAAA,EAAA,KAAA;AADF,OAAA,MAEO;AACL,QAAA,KAAA,CAAA,gBAAA,CAAA,WAAA,EAAA,KAAA;AACD;AALH,KAAA;;;AAmED;;;;SApXChI,kB,GAAAA,SAAAA,kBAAAA,CAAAA,SAAAA,EAAAA;uBAC4B,KAAKI,K;QAAvBiG,MAAAA,GAAAA,YAAAA,CAAAA,M;QAAQlI,KAAAA,GAAAA,YAAAA,CAAAA,K;;AAEhB,QAAI,CAACyI,OAAO,CAAA,KAAA,EAAQ3G,SAAS,CAA7B,KAAY,CAAZ,EAAsC;AACpC,WAAA,cAAA,CAAA,SAAA,EAAA,KAAA;AACD;;AAED,QAAIoG,MAAM,KAAKpG,SAAS,CAAxB,MAAA,EAAiC;AAC/B,WAAA,QAAA,CAAc;AAAEoG,QAAAA,MAAM,EAAE,KAAKA;AAAf,OAAd;AACD;AACF,G;;SA+SDnG,M,GAAAA,SAAAA,MAAAA,GAAAA;;;sBAOM,KAAKc,K;QALP8F,SAAAA,GAAAA,WAAAA,CAAAA,S;QACAT,MAAAA,GAAAA,WAAAA,CAAAA,M;QACA5F,YAAAA,GAAAA,WAAAA,CAAAA,Y;QACAsG,qBAAAA,GAAAA,WAAAA,CAAAA,qB;QACA9I,UAAAA,GAAAA,WAAAA,CAAAA,U;uBAUE,KAAKmC,K;QAPP6F,SAAAA,GAAAA,YAAAA,CAAAA,S;QACA/B,QAAAA,GAAAA,YAAAA,CAAAA,Q;QACAX,UAAAA,GAAAA,YAAAA,CAAAA,U;QACAG,MAAAA,GAAAA,YAAAA,CAAAA,M;QACAjB,QAAAA,GAAAA,YAAAA,CAAAA,Q;QACA+D,QAAAA,GAAAA,YAAAA,CAAAA,Q;QACAC,cAAAA,GAAAA,YAAAA,CAAAA,c;AAEF,QAAMwB,mBAAmB,GACvB,KAAA,CAAA,aAAA,CAAC,KAAD,SAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACM,KAAKd,WADX,EACWA;AACTe,MAAAA,eAAe,EAAE,KAAA,YAAA,GAAA,CAAA,GAAwB,CADhCf;AAETzG,MAAAA,QAAQ,EAAE,KAAKE,cAFNuG;AAGTvK,MAAAA,QAAQ,EAAE6D,YAHD0G;AAIT5K,MAAAA,IAAI,EAAE,KAAKA;AAJF4K,KADX,CAAA,EAOG,UAAA,KAAA,EAAA;AAAA,aACC,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACM,MAAI,CAACA,WADX,EAEM/G,KAFN,EAGMiG,MAHN,EAGMA;AACJ9C,QAAAA,UAAU,EAAEA,UADR8C;AAEJ5D,QAAAA,QAAQ,EAAEA,QAFN4D;AAGJnC,QAAAA,QAAQ,EAAEA,QAHNmC;AAIJpC,QAAAA,QAAQ,EAAE,MAAI,CAACA;AAJXoC,OAHN,CAAA,CADD;AARL,KACE,CADF;AAsBA,WAAO3C,MAAM,GAAA,mBAAA,GAGX,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAKhB,MAAAA,SAAS,EAAC,OAAf;AAAuBE,MAAAA,KAAK,EAAEA,OAA9B;AAAqC8C,MAAAA,GAAG,EAAE,KAAK7F;AAA/C,KAAA,EACE,KAAA,CAAA,aAAA,CAAA,WAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACM,KAAKsI,UADX,EACWA;AACTpD,MAAAA,kBAAkB,EAAEqD,OAAO,CAACnC,SAAS,IAAV,qBAAA,CADlBkC;AAET7B,MAAAA,MAAM,EAAE,SAAA,MAAA,GAAA,CAAA,CAFC6B;AAGTzH,MAAAA,QAAQ,EAAE,KAAK2H,YAHNF;AAITnD,MAAAA,OAAO,EAAE,KAAKsD,UAJLH;AAKTlD,MAAAA,OAAO,EAAEuB,QAAQ,GAAA,IAAA,GAAU,KAAK+B,YALvBJ;AAMTK,MAAAA,SAAS,EAAE,KAAKC,aANPN;AAOT3B,MAAAA,QAAQ,EAAEA,QAAQ,IAAIC,cAPb0B;AAQTzC,MAAAA,GAAG,EAAE,KAAKgD,QARDP;AASThK,MAAAA,KAAK,EAAEF,UAAU,IAAI8I;AATZoB,KADX,CAAA,CADF,EAaGrB,SAAS,IAhBd,mBAGE,CAHF;AAmBD,G;;;;;AAtWC,aAAO,KAAA,KAAA,CAAA,IAAA,KAAP,OAAA;AACD;;;;yBAG2B,KAAK1G,K;UAAvBtD,MAAAA,GAAAA,YAAAA,CAAAA,M;UAAQqB,KAAAA,GAAAA,YAAAA,CAAAA,K;AAChB,UAAM0I,mBAAmB,GAAG,KAAA,YAAA,GAAA,EAAA,GAA5B,IAAA;AAEA,aAAO;AACLC,QAAAA,SAAS,EADJ,KAAA;AAELT,QAAAA,MAAM,EAAE,KAFH,MAAA;AAGL5F,QAAAA,YAAY,EAAEtC,KAAK,IAHd,mBAAA;AAIL4I,QAAAA,qBAAqB,EAAEvJ,kBAAkB,CAAA,KAAA,EAJpC,MAIoC,CAJpC;AAKLS,QAAAA,UAAU,EAAE;AALP,OAAP;AAOD;;;;AAGC,aAAOjB,IAAI,CAAA,kBAAA,EAAqB,KAAhC,KAAW,CAAX;AACD;;;;AAGC,UAAMoD,KAAK,GAAGjD,IAAI,CAAA,kBAAA,EAAqB,KAAvC,KAAkB,CAAlB;AACA,UAAMoJ,WAAW,GACfnG,KAAK,CAALA,WAAAA,KAAAA,SAAAA,GAAkCA,KAAK,CAAvCA,WAAAA,GAAsD,KAAA,KAAA,CADxD,MAAA;AAGA,aAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAEEmG,QAAAA,WAAW,EAAXA;AAFF,OAAA,CAAA;AAID;;;;UAGS9F,YAAAA,GAAiB,KAAKO,KAAL,CAAjBP,Y;UACAlE,IAAAA,GAAS,KAAK6D,KAAL,CAAT7D,I;;AAER,UAAI,CAAJ,YAAA,EAAmB;AACjB,eAAA,IAAA;AACD;;AAED,aAAO,KAAA,YAAA,GAAoBkE,YAAY,CAAhC,CAAgC,CAAhC,GAAP,YAAA;AACD;;;;UAGS4F,MAAAA,GAAW,KAAKjG,KAAL,CAAXiG,M;AAER,UAAA,UAAA;;AAEA,UAAI;AACFW,QAAAA,UAAU,GAAGC,OAAO,CAAA,eAAA,MAAA,GAApBD,OAAoB,CAApBA;AADF,OAAA,CAEE,OAAA,CAAA,EAAU;AACVE,QAAAA,OAAO,CAAPA,IAAAA,CAAAA,OAAAA,MAAAA,GAAAA,0BAAAA;AACAF,QAAAA,UAAU,GAAGC,OAAO,CAApBD,sBAAoB,CAApBA;AACD;;AAED,aAAA,UAAA;AACD;;;;UAGSd,cAAAA,GAAmB,KAAKiB,WAAL,CAAnBjB,c;UACAjC,QAAAA,GAAa,KAAA,KAAA,CAAWoC,MAAX,CAAbpC,Q;AAER,aAAO3G,eAAe,CAAA,cAAA,EAAtB,QAAsB,CAAtB;AACD;;;;CAjHGwI,CAA2B7G,KAAK,CAACC,SAAjC4G,C;;AAIGA,kBAAAA,CAAAA,YAAAA,GAAwC;AAC7CC,EAAAA,gBAAgB,EAD6B,KAAA;AAE7CjB,EAAAA,SAAS,EAFoC,OAAA;AAG7CkB,EAAAA,oBAAoB,EAHyB,IAAA;AAI7CC,EAAAA,SAAS,EAJoC,IAAA;AAK7C1J,EAAAA,IAAI,EALyC,SAAA;AAM7CgH,EAAAA,UAAU,EAAE,SAAA,UAAA,GAAA;AAAA,WAAA,IAAA;AANiC,GAAA;AAO7C2C,EAAAA,cAAc,EAP+B,CAAA;AAQ7CpJ,EAAAA,MAAM,EARuC,YAAA;AAS7CsF,EAAAA,IAAI,EATyC,UAAA;AAU7CqD,EAAAA,EAAE,EAV2C,SAAA;AAW7C/B,EAAAA,MAAM,EAXuC,KAAA;AAY7CyC,EAAAA,eAAe,EAZ8B,KAAA;AAa7CC,EAAAA,gBAAgB,EAb6B,KAAA;AAc7Cf,EAAAA,KAAK,EAdwC,SAAA;AAe7CgB,EAAAA,MAAM,EAfuC,OAAA;AAgB7ClB,EAAAA,IAAI,EAhByC,SAAA;AAiB7CmB,EAAAA,MAAM,EAAE,SAAA,MAAA,GAAA,CAjBqC,CAAA;AAkB7C5F,EAAAA,QAAQ,EAAE,SAAA,QAAA,GAAA,CAlBmC,CAAA;AAmB7C6F,EAAAA,WAAW,EAnBkC,SAAA;AAoB7CrC,EAAAA,QAAQ,EApBqC,MAAA;AAqB7CsC,EAAAA,QAAQ,EArBqC,KAAA;AAsB7CC,EAAAA,cAAc,EAtB+B,KAAA;AAuB7CnB,EAAAA,QAAQ,EAvBqC,KAAA;AAwB7CvB,EAAAA,SAAS,EAxBoC,IAAA;AAyB7C2C,EAAAA,eAAe,EAzB8B,KAAA;AA0B7CC,EAAAA,IAAI,EA1ByC,OAAA;AA2B7CxI,EAAAA,KAAK,EA3BwC,IAAA;AA4B7CsE,EAAAA,QAAQ,EAAE;AA5BmC,CAAxCqD","sourcesContent":["import { convertTokens } from '@date-fns/upgrade/v2';\nimport { parse } from 'date-fns';\nimport format from 'date-fns/format';\nimport isBefore from 'date-fns/isBefore';\nimport startOfDay from 'date-fns/startOfDay';\nimport { DateObj } from 'dayzed';\nimport { Object } from './types';\n\nexport const isSelectable = (date: Date, minDate?: Date, maxDate?: Date) => {\n  if (\n    (minDate && isBefore(date, minDate)) ||\n    (maxDate && isBefore(maxDate, date))\n  ) {\n    return false;\n  }\n\n  return true;\n};\n\nexport const getToday = (minDate?: Date, maxDate?: Date): DateObj => {\n  const today = new Date();\n\n  return {\n    date: startOfDay(today),\n    nextMonth: false,\n    prevMonth: false,\n    selectable: isSelectable(today, minDate, maxDate),\n    selected: false,\n    today: true,\n  };\n};\n\nexport const formatDate = (date: Date | null, dateFormat: string) =>\n  date ? format(startOfDay(date), convertTokens(dateFormat)) : undefined;\n\nexport const omit = (keysToOmit: string[], obj: Object) => {\n  const newObj = { ...obj };\n\n  keysToOmit.forEach((key) => delete newObj[key]);\n\n  return newObj;\n};\n\nexport const pick = (keysToPick: string[], obj: Object) => {\n  const newObj: Object = {};\n\n  keysToPick.forEach((key) => {\n    newObj[key] = obj[key];\n  });\n\n  return newObj;\n};\n\nexport const moveElementsByN = <T>(n: number, arr: T[]) =>\n  arr.slice(n).concat(arr.slice(0, n));\n\nexport const formatSelectedDate = (\n  selectedDate: Date | Date[] | null | undefined,\n  dateFormat: string\n) => {\n  if (!selectedDate) {\n    return '';\n  }\n\n  return Array.isArray(selectedDate)\n    ? selectedDate.map((date) => formatDate(date, dateFormat)).join(' - ')\n    : formatDate(selectedDate, dateFormat);\n};\n\nexport const parseFormatString = (formatString: string) =>\n  formatString.replace(/[D, Y]/gi, (a) => a.toLowerCase());\n\nexport const parseOnBlur = (typedValue: string, formatString: string) => {\n  return parse(typedValue, parseFormatString(formatString), new Date());\n};\n\nexport const parseRangeOnBlur = (typedValue: string, formatString: string) => {\n  const parsedFormatString = parseFormatString(formatString);\n\n  const rangeValues = typedValue.split(' - ');\n\n  return rangeValues\n    .map((value) => parse(value, parsedFormatString, new Date()))\n    .sort((a, b) => (a > b ? 1 : -1));\n};\n\nexport const onlyNumbers = (value = '') => value.replace(/[^\\d]/g, '');\n\nexport function getShortDate(date?: Date) {\n  if (!date) {\n    return undefined;\n  }\n\n  return date.toISOString().slice(0, 10);\n}\n","/**\n * This is intended to be used to compose event handlers\n * They are executed in order until one of them calls\n * `event.preventDefault()`. Not sure this is the best\n * way to do this, but it seems legit...\n * @param {Function} fns the event hanlder functions\n * @return {Function} the event handler to add to an element\n */\nexport function composeEventHandlers(...fns) {\n  return (event, ...args) =>\n    fns.some((fn) => {\n      if (fn) {\n        fn(event, ...args);\n      }\n\n      return event.defaultPrevented;\n    });\n}\n\n/**\n * Create an event handler for keyboard key given a config map\n * of event handlers\n * @param {Object} config consists of left, right, up, and down\n * @return {Function} the event handler to handle keyboard key\n */\nexport function getArrowKeyHandlers(config) {\n  return (event) => {\n    const { keyCode } = event;\n    const fn = {\n      37: config.left,\n      39: config.right,\n      38: config.up,\n      40: config.down,\n    }[keyCode];\n    if (fn) {\n      fn(event);\n    }\n  };\n}\n\n/**\n * Checks if a given date is with date range\n * @param {Array} range the range array with upper and lower bound\n * @param {Date} date a given date\n * @return {Boolean} true if date is in the range, false otherwise\n */\nexport function isInRange(range, date) {\n  return range.length === 2 && range[0] <= date && range[1] >= date;\n}\n","import Dayzed from 'dayzed';\nimport React from 'react';\nimport { BaseDatePickerProps } from '../types';\nimport { getArrowKeyHandlers } from './utils';\n\nclass BaseDatePicker extends React.Component<BaseDatePickerProps> {\n  state = {\n    offset: 0,\n  };\n\n  rootNode = React.createRef<HTMLElement>();\n\n  handleArrowKeys = getArrowKeyHandlers({\n    left: () => {\n      this.getKeyOffset(-1);\n    },\n    right: () => {\n      this.getKeyOffset(1);\n    },\n    up: () => {\n      this.getKeyOffset(-7);\n    },\n    down: () => {\n      this.getKeyOffset(7);\n    },\n  });\n\n  getKeyOffset(number) {\n    if (!this.rootNode.current) {\n      return;\n    }\n\n    const e = document.activeElement;\n    const buttons = this.rootNode.current.querySelectorAll('button');\n    buttons.forEach((el, i) => {\n      const newNodeKey = i + number;\n      if (el === e) {\n        if (newNodeKey <= buttons.length - 1 && newNodeKey >= 0) {\n          buttons[newNodeKey].focus();\n        } else {\n          buttons[0].focus();\n        }\n      }\n    });\n  }\n\n  setRootNode = (ref) => {\n    this.rootNode = ref;\n  };\n\n  getRootProps = ({ refKey = 'ref', ...rest } = {}) => {\n    return {\n      [refKey]: this.setRootNode,\n      onKeyDown: this.handleArrowKeys,\n      ...rest,\n    };\n  };\n\n  _handleOffsetChanged = (offset) => {\n    this.setState({\n      offset,\n    });\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this._handleOffsetChanged(0);\n    }\n  }\n\n  render() {\n    const { children, ...rest } = this.props;\n\n    return (\n      <Dayzed\n        {...rest}\n        offset={this.state.offset}\n        onOffsetChanged={this._handleOffsetChanged}\n        render={(renderProps) =>\n          children({\n            ...renderProps,\n            getRootProps: this.getRootProps,\n          })\n        }\n      />\n    );\n  }\n}\n\nexport default BaseDatePicker;\n","import React from 'react';\nimport { BasicDatePickerProps } from '../types';\nimport BaseDatePicker from './base';\n\nclass DatePicker extends React.Component<BasicDatePickerProps> {\n  _handleOnDateSelected = (\n    { selectable, date },\n    event: React.SyntheticEvent\n  ) => {\n    const { selected: selectedDate, onChange } = this.props;\n\n    if (!selectable) {\n      return;\n    }\n\n    let newDate = date;\n    if (selectedDate && selectedDate.getTime() === date.getTime()) {\n      newDate = null;\n    }\n\n    if (onChange) {\n      onChange(event, newDate);\n    }\n  };\n\n  render() {\n    return (\n      <BaseDatePicker\n        {...this.props}\n        onDateSelected={this._handleOnDateSelected}\n      />\n    );\n  }\n}\n\nexport default DatePicker;\n","import compareAsc from 'date-fns/compareAsc';\nimport isSameDay from 'date-fns/isSameDay';\nimport React from 'react';\nimport { RangeDatePickerProps } from '../types';\nimport BaseDatePicker from './base';\nimport { composeEventHandlers, isInRange } from './utils';\n\ntype RangeDatePickerState = {\n  hoveredDate: Date | null;\n};\n\nclass RangeDatePicker extends React.Component<\n  RangeDatePickerProps,\n  RangeDatePickerState\n> {\n  static defaultProps = {\n    selected: [],\n  };\n\n  state = { hoveredDate: null };\n\n  setHoveredDate = (date) => {\n    this.setState((state) =>\n      state.hoveredDate === date ? null : { hoveredDate: date }\n    );\n  };\n\n  // Calendar level\n  onMouseLeave = () => {\n    this.setHoveredDate(null);\n  };\n\n  // Date level\n  onHoverFocusDate(date) {\n    if (this.props.selected.length !== 1) {\n      return;\n    }\n    this.setHoveredDate(date);\n  }\n\n  _handleOnDateSelected = (\n    { selectable, date },\n    event: React.SyntheticEvent\n  ) => {\n    const { selected: selectedDates, onChange } = this.props;\n\n    if (!selectable) {\n      return;\n    }\n\n    const dateTime = date.getTime();\n    let newDates = [...selectedDates];\n    if (selectedDates.length) {\n      if (selectedDates.length === 1) {\n        const firstTime = selectedDates[0].getTime();\n        if (firstTime < dateTime) {\n          newDates.push(date);\n        } else {\n          newDates.unshift(date);\n        }\n      } else if (newDates.length === 2) {\n        newDates = [date];\n      }\n    } else {\n      newDates.push(date);\n    }\n\n    if (onChange) {\n      onChange(event, newDates);\n    }\n\n    if (newDates.length === 2) {\n      this.setHoveredDate(null);\n    }\n  };\n\n  getEnhancedDateProps = (\n    getDateProps,\n    dateBounds,\n    { onMouseEnter, onFocus, ...restProps }\n  ) => {\n    const { hoveredDate } = this.state;\n    const { date } = restProps.dateObj;\n    return getDateProps({\n      ...restProps,\n      inRange: isInRange(dateBounds, date),\n      start: dateBounds[0] && isSameDay(dateBounds[0], date),\n      end: dateBounds[1] && isSameDay(dateBounds[1], date),\n      // @ts-ignore\n      hovered: hoveredDate && isSameDay(hoveredDate, date),\n      onMouseEnter: composeEventHandlers(onMouseEnter, () => {\n        this.onHoverFocusDate(date);\n      }),\n      onFocus: composeEventHandlers(onFocus, () => {\n        this.onHoverFocusDate(date);\n      }),\n    });\n  };\n\n  getEnhancedRootProps = (getRootProps, props) =>\n    getRootProps({\n      ...props,\n      onMouseLeave: this.onMouseLeave,\n    });\n\n  render() {\n    const { children, ...rest } = this.props;\n    const { hoveredDate } = this.state;\n    const { selected } = this.props;\n\n    const dateBounds =\n      selected.length === 2 || !selected.length || !hoveredDate\n        ? selected\n        : // prettier-ignore\n          // @ts-ignore\n          [selected[0], hoveredDate].sort(compareAsc);\n\n    return (\n      <BaseDatePicker {...rest} onDateSelected={this._handleOnDateSelected}>\n        {({ getRootProps, getDateProps, ...renderProps }) =>\n          children({\n            ...renderProps,\n            getRootProps: this.getEnhancedRootProps.bind(this, getRootProps),\n            getDateProps: this.getEnhancedDateProps.bind(\n              this,\n              getDateProps,\n              dateBounds\n            ),\n          })\n        }\n      </BaseDatePicker>\n    );\n  }\n}\n\nexport default RangeDatePicker;\n","import React from 'react';\nimport { Button, ButtonProps } from 'semantic-ui-react';\n\nconst CustomButton = ({ icon, ...otherProps }: ButtonProps) => (\n  <Button basic compact icon={icon} {...otherProps} />\n);\n\nexport default CustomButton;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import cn from 'classnames';\nimport React from 'react';\nimport './cell.css';\n\ntype CalendarCellProps = {\n  end?: boolean;\n  hovered?: boolean;\n  inRange?: boolean;\n  inverted?: boolean;\n  nextMonth?: boolean;\n  prevMonth?: boolean;\n  selectable?: boolean;\n  selected?: boolean;\n  start?: boolean;\n  today?: boolean;\n  title?: string;\n};\n\nconst CalendarCell: React.FC<CalendarCellProps> = ({\n  end,\n  hovered,\n  inRange,\n  inverted,\n  nextMonth,\n  prevMonth,\n  selectable,\n  selected,\n  start,\n  today,\n  ...otherProps\n}) => (\n  <span\n    className={cn('clndr-cell', {\n      inverted,\n      'clndr-cell-today': today,\n      'clndr-cell-disabled': !selectable,\n      'clndr-cell-other-month': nextMonth || prevMonth,\n      'clndr-cell-inrange': inRange,\n      'clndr-cell-selected': selected,\n    })}\n    {...otherProps}\n  />\n);\n\nCalendarCell.defaultProps = {\n  end: false,\n  hovered: false,\n  inRange: false,\n  nextMonth: false,\n  prevMonth: false,\n  start: false,\n};\n\nexport default CalendarCell;\n","import React from 'react';\nimport { DateObj } from 'dayzed';\nimport { Button, ButtonProps } from 'semantic-ui-react';\n\ninterface TodayButtonProps extends DateObj, ButtonProps {\n  end?: boolean;\n  hovered?: boolean;\n  inRange?: boolean;\n  start?: boolean;\n}\n\nconst style: React.CSSProperties = { marginTop: 10 };\n\nconst TodayButton: React.FC<TodayButtonProps> = ({\n  end,\n  hovered,\n  inRange,\n  nextMonth,\n  prevMonth,\n  selectable,\n  selected,\n  start,\n  today,\n  ...otherProps\n}) => (\n  <Button\n    className=\"clndr-button-today\"\n    compact\n    data-testid=\"datepicker-today-button\"\n    fluid\n    style={style}\n    {...otherProps}\n  />\n);\n\nexport default TodayButton;\n","import cn from 'classnames';\nimport React, { Fragment } from 'react';\nimport { Segment } from 'semantic-ui-react';\nimport { Locale, RenderProps, SemanticDatepickerProps } from 'types';\nimport { getShortDate, getToday } from '../../utils';\nimport Button from '../button';\nimport CalendarCell from '../cell';\nimport TodayButton from '../today-button';\nimport './calendar.css';\n\ninterface CalendarProps extends RenderProps {\n  filterDate: (date: Date) => boolean;\n  inline: SemanticDatepickerProps['inline'];\n  inverted: SemanticDatepickerProps['inverted'];\n  maxDate?: Date;\n  minDate?: Date;\n  months: Locale['months'];\n  nextMonth: string;\n  nextYear: string;\n  pointing: SemanticDatepickerProps['pointing'];\n  previousMonth: string;\n  previousYear: string;\n  showToday: SemanticDatepickerProps['showToday'];\n  todayButton: string;\n  weekdays: Locale['weekdays'];\n}\n\nconst styles: { [key: string]: React.CSSProperties } = {\n  leftBtn: { textAlign: 'start' },\n  rightBtn: { textAlign: 'end' },\n};\n\nconst pointings = {\n  'top left': 'clndr-top clndr-left',\n  'top right': 'clndr-top clndr-right',\n  left: 'clndr-left',\n  right: 'clndr-right',\n};\n\nconst Calendar: React.FC<CalendarProps> = ({\n  calendars,\n  filterDate,\n  getBackProps,\n  getDateProps,\n  getForwardProps,\n  inline,\n  inverted,\n  maxDate,\n  minDate,\n  months,\n  nextMonth,\n  nextYear,\n  previousMonth,\n  previousYear,\n  showToday,\n  todayButton,\n  weekdays,\n  pointing,\n}) => (\n  <Segment\n    inverted={inverted}\n    className={cn('clndr-calendars-segment', {\n      'clndr-floating': !inline,\n      [pointings[pointing]]: !inline,\n    })}\n  >\n    <div\n      className=\"clndr-calendars-wrapper\"\n      style={{ '--n': calendars.length } as React.CSSProperties}\n    >\n      {calendars.map((calendar, calendarIdx) => (\n        <div key={`${calendar.year}-${calendar.month}`}>\n          <div className=\"clndr-control\">\n            <div style={styles.leftBtn}>\n              {calendarIdx === 0 && (\n                <Fragment>\n                  <Button\n                    icon=\"angle double left\"\n                    inverted={inverted}\n                    title={previousYear}\n                    {...getBackProps({ calendars, offset: 12 })}\n                  />\n                  <Button\n                    icon=\"angle left\"\n                    inverted={inverted}\n                    style={{ marginRight: 0 }}\n                    title={previousMonth}\n                    {...getBackProps({ calendars })}\n                  />\n                </Fragment>\n              )}\n            </div>\n\n            <span title={`${months[calendar.month]} ${calendar.year}`}>\n              {months[calendar.month].slice(0, 3)} {calendar.year}\n            </span>\n\n            <div style={styles.rightBtn}>\n              {calendarIdx === calendars.length - 1 && (\n                <Fragment>\n                  <Button\n                    icon=\"angle right\"\n                    inverted={inverted}\n                    title={nextMonth}\n                    {...getForwardProps({ calendars })}\n                  />\n                  <Button\n                    icon=\"angle double right\"\n                    inverted={inverted}\n                    style={{ marginRight: 0 }}\n                    title={nextYear}\n                    {...getForwardProps({ calendars, offset: 12 })}\n                  />\n                </Fragment>\n              )}\n            </div>\n          </div>\n          <div className=\"clndr-days\">\n            {weekdays.map((weekday) => (\n              <CalendarCell\n                key={`${calendar.year}-${calendar.month}-${weekday}`}\n                inverted={inverted}\n                title={weekday}\n              >\n                {weekday.slice(0, 2)}\n              </CalendarCell>\n            ))}\n            {calendar.weeks.map((week) =>\n              week.map((dateObj, weekIdx) => {\n                const key = `${calendar.year}-${calendar.month}-${weekIdx}`;\n\n                if (!dateObj) {\n                  return <CalendarCell key={key} inverted={inverted} />;\n                }\n\n                const selectable =\n                  dateObj.selectable && filterDate(dateObj.date);\n                const shortDate = getShortDate(dateObj.date);\n\n                return (\n                  <CalendarCell\n                    key={key}\n                    {...dateObj}\n                    {...getDateProps({ dateObj: { ...dateObj, selectable } })}\n                    data-testid={`datepicker-cell-${shortDate}`}\n                    inverted={inverted}\n                    selectable={selectable}\n                  >\n                    {dateObj.date.getDate()}\n                  </CalendarCell>\n                );\n              })\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n    {showToday && (\n      <TodayButton\n        inverted={inverted}\n        {...getToday(minDate, maxDate)}\n        {...getDateProps({\n          dateObj: getToday(minDate, maxDate),\n        })}\n      >\n        {todayButton}\n      </TodayButton>\n    )}\n  </Segment>\n);\n\nexport default Calendar;\n","import React from 'react';\nimport { Icon as SUIIcon } from 'semantic-ui-react';\nimport { SemanticDatepickerProps } from '../types';\n\ntype CustomIconProps = {\n  clearIcon: SemanticDatepickerProps['clearIcon'];\n  icon: SemanticDatepickerProps['icon'];\n  isClearIconVisible: boolean;\n  onClear: () => void;\n  onClick: () => void;\n};\n\nconst CustomIcon = ({\n  clearIcon,\n  icon,\n  isClearIconVisible,\n  onClear,\n  onClick,\n}: CustomIconProps) => {\n  if (isClearIconVisible && clearIcon && React.isValidElement(clearIcon)) {\n    return React.cloneElement(clearIcon, {\n      'data-testid': 'datepicker-icon',\n      onClick: onClear,\n    });\n  }\n\n  if (isClearIconVisible && clearIcon && !React.isValidElement(clearIcon)) {\n    return (\n      <SUIIcon\n        data-testid=\"datepicker-icon\"\n        link\n        name={clearIcon}\n        onClick={onClear}\n      />\n    );\n  }\n\n  if (icon && React.isValidElement(icon)) {\n    return React.cloneElement(icon, {\n      'data-testid': 'datepicker-icon',\n      onClick,\n    });\n  }\n\n  return (\n    <SUIIcon data-testid=\"datepicker-icon\" link name={icon} onClick={onClick} />\n  );\n};\n\nexport default CustomIcon;\n","import React from 'react';\nimport { Form, Input, FormInputProps } from 'semantic-ui-react';\nimport { SemanticDatepickerProps } from '../types';\nimport CustomIcon from './icon';\n\ntype InputProps = FormInputProps & {\n  clearIcon: SemanticDatepickerProps['clearIcon'];\n  icon: SemanticDatepickerProps['icon'];\n  isClearIconVisible: boolean;\n};\n\nconst CustomInput = React.forwardRef<Input, InputProps>((props, ref) => {\n  const {\n    clearIcon,\n    icon,\n    isClearIconVisible,\n    label,\n    onClear,\n    onClick,\n    required,\n    value,\n    ...rest\n  } = props;\n\n  return (\n    <Form.Field required={required}>\n      {label && <label htmlFor={rest.id as string | undefined}>{label}</label>}\n      <Input\n        data-testid=\"datepicker-input\"\n        {...rest}\n        ref={ref}\n        required={required}\n        icon={\n          <CustomIcon\n            clearIcon={clearIcon}\n            icon={icon}\n            isClearIconVisible={isClearIconVisible}\n            onClear={onClear}\n            onClick={onClick}\n          />\n        }\n        onClick={onClick}\n        value={value}\n      />\n    </Form.Field>\n  );\n});\n\nexport default CustomInput;\n","import isValid from 'date-fns/isValid';\nimport formatStringByPattern from 'format-string-by-pattern';\nimport React from 'react';\nimport isEqual from 'react-fast-compare';\nimport { Input as SUIInput } from 'semantic-ui-react';\nimport {\n  formatSelectedDate,\n  moveElementsByN,\n  omit,\n  onlyNumbers,\n  parseOnBlur,\n  parseRangeOnBlur,\n  pick,\n} from './utils';\nimport { BasicDatePicker, RangeDatePicker } from './pickers';\nimport { Locale, SemanticDatepickerProps } from './types';\nimport Calendar from './components/calendar';\nimport Input from './components/input';\n\nconst style: React.CSSProperties = {\n  display: 'inline-block',\n  position: 'relative',\n};\nconst semanticInputProps = [\n  'autoComplete',\n  'className',\n  'clearIcon',\n  'disabled',\n  'error',\n  'icon',\n  'iconPosition',\n  'id',\n  'label',\n  'loading',\n  'name',\n  'onBlur',\n  'onChange',\n  'onClick',\n  'onContextMenu',\n  'onDoubleClick',\n  'onFocus',\n  'onInput',\n  'onKeyDown',\n  'onKeyPress',\n  'onKeyUp',\n  'onMouseDown',\n  'onMouseEnter',\n  'onMouseLeave',\n  'onMouseMove',\n  'onMouseOut',\n  'onMouseOver',\n  'onMouseUp',\n  'placeholder',\n  'required',\n  'size',\n  'transparent',\n  'readOnly',\n];\n\ntype SemanticDatepickerState = {\n  isVisible: boolean;\n  locale: Locale;\n  selectedDate: Date | Date[] | null;\n  selectedDateFormatted?: string;\n  typedValue: string | null;\n};\n\nclass SemanticDatepicker extends React.Component<\n  SemanticDatepickerProps,\n  SemanticDatepickerState\n> {\n  static defaultProps: SemanticDatepickerProps = {\n    allowOnlyNumbers: false,\n    clearIcon: 'close',\n    clearOnSameDateClick: true,\n    clearable: true,\n    date: undefined,\n    filterDate: () => true,\n    firstDayOfWeek: 0,\n    format: 'YYYY-MM-DD',\n    icon: 'calendar',\n    id: undefined,\n    inline: false,\n    keepOpenOnClear: false,\n    keepOpenOnSelect: false,\n    label: undefined,\n    locale: 'en-US',\n    name: undefined,\n    onBlur: () => {},\n    onChange: () => {},\n    placeholder: undefined,\n    pointing: 'left',\n    readOnly: false,\n    datePickerOnly: false,\n    required: false,\n    showToday: true,\n    showOutsideDays: false,\n    type: 'basic',\n    value: null,\n    inverted: false,\n  };\n\n  el = React.createRef<HTMLDivElement>();\n  inputRef = React.createRef<SUIInput>();\n\n  componentDidUpdate(prevProps: SemanticDatepickerProps) {\n    const { locale, value } = this.props;\n\n    if (!isEqual(value, prevProps.value)) {\n      this.onDateSelected(undefined, value);\n    }\n\n    if (locale !== prevProps.locale) {\n      this.setState({ locale: this.locale });\n    }\n  }\n\n  get isRangeInput() {\n    return this.props.type === 'range';\n  }\n\n  get initialState() {\n    const { format, value } = this.props;\n    const initialSelectedDate = this.isRangeInput ? [] : null;\n\n    return {\n      isVisible: false,\n      locale: this.locale,\n      selectedDate: value || initialSelectedDate,\n      selectedDateFormatted: formatSelectedDate(value, format),\n      typedValue: null,\n    };\n  }\n\n  get dayzedProps() {\n    return omit(semanticInputProps, this.props);\n  }\n\n  get inputProps() {\n    const props = pick(semanticInputProps, this.props);\n    const placeholder =\n      props.placeholder !== undefined ? props.placeholder : this.props.format;\n\n    return {\n      ...props,\n      placeholder,\n    };\n  }\n\n  get date() {\n    const { selectedDate } = this.state;\n    const { date } = this.props;\n\n    if (!selectedDate) {\n      return date;\n    }\n\n    return this.isRangeInput ? selectedDate[0] : selectedDate;\n  }\n\n  get locale() {\n    const { locale } = this.props;\n\n    let localeJson: Locale;\n\n    try {\n      localeJson = require(`./locales/${locale}.json`);\n    } catch (e) {\n      console.warn(`\"${locale}\" is not a valid locale`);\n      localeJson = require('./locales/en-US.json');\n    }\n\n    return localeJson;\n  }\n\n  get weekdays() {\n    const { firstDayOfWeek } = this.dayzedProps;\n    const { weekdays } = this.state.locale;\n\n    return moveElementsByN(firstDayOfWeek, weekdays);\n  }\n\n  state = this.initialState;\n\n  Component: React.ElementType = this.isRangeInput\n    ? RangeDatePicker\n    : BasicDatePicker;\n\n  resetState = (event) => {\n    const { keepOpenOnClear, onChange } = this.props;\n    const newState = {\n      isVisible: keepOpenOnClear,\n      selectedDate: this.isRangeInput ? [] : null,\n      selectedDateFormatted: '',\n    };\n\n    this.setState(newState, () => {\n      onChange(event, { ...this.props, value: null });\n    });\n  };\n\n  clearInput = (event) => {\n    this.resetState(event);\n    this.handleBlur(event);\n  };\n\n  mousedownCb = (mousedownEvent) => {\n    const { isVisible } = this.state;\n\n    if (isVisible && this.el) {\n      if (this.el.current && !this.el.current.contains(mousedownEvent.target)) {\n        this.close(mousedownEvent);\n      }\n    }\n  };\n\n  keydownCb = (keydownEvent) => {\n    const { isVisible } = this.state;\n    if (keydownEvent.keyCode === 27 && isVisible) {\n      // Escape\n      this.close(keydownEvent);\n    }\n  };\n\n  close = (event) => {\n    window.removeEventListener('keydown', this.keydownCb);\n    window.removeEventListener('mousedown', this.mousedownCb);\n\n    this.handleBlur(event);\n    this.setState({\n      isVisible: false,\n    });\n  };\n\n  focusOnInput = () => {\n    if (this.inputRef?.current?.focus) {\n      this.inputRef.current.focus();\n    }\n  };\n\n  showCalendar = (event) => {\n    event.preventDefault();\n    window.addEventListener('mousedown', this.mousedownCb);\n    window.addEventListener('keydown', this.keydownCb);\n\n    this.focusOnInput();\n    this.setState({\n      isVisible: true,\n    });\n  };\n\n  handleRangeInput = (newDates, event, fromBlur = false) => {\n    const { format, keepOpenOnSelect, onChange } = this.props;\n\n    if (!newDates || !newDates.length) {\n      this.resetState(event);\n\n      if (!fromBlur) {\n        this.handleBlur(event);\n      }\n\n      return;\n    }\n\n    const newState = {\n      selectedDate: newDates,\n      selectedDateFormatted: formatSelectedDate(newDates, format),\n      typedValue: null,\n    };\n\n    this.setState(newState, () => {\n      onChange(event, { ...this.props, value: newDates });\n\n      if (newDates.length === 2) {\n        this.setState({ isVisible: keepOpenOnSelect });\n\n        if (keepOpenOnSelect) {\n          this.focusOnInput();\n        } else if (!fromBlur) {\n          this.handleBlur(event);\n        }\n      } else if (newDates.length === 1) {\n        this.focusOnInput();\n      } else if (!fromBlur) {\n        this.handleBlur(event);\n      }\n    });\n  };\n\n  handleBasicInput = (newDate, event, fromBlur = false) => {\n    const {\n      format,\n      keepOpenOnSelect,\n      onChange,\n      clearOnSameDateClick,\n    } = this.props;\n\n    if (!newDate) {\n      // if clearOnSameDateClick is true (this is the default case)\n      // then reset the state. This is what was previously the default\n      // behavior, without a specific prop.\n      if (clearOnSameDateClick) {\n        this.resetState(event);\n\n        if (!fromBlur) {\n          this.handleBlur(event);\n        }\n      } else {\n        // Don't reset the state. Instead, close or keep open the\n        // datepicker according to the value of keepOpenOnSelect.\n        // Essentially, follow the default behavior of clicking a date\n        // but without changing the value in state.\n        this.setState({\n          isVisible: keepOpenOnSelect,\n        });\n\n        if (keepOpenOnSelect) {\n          this.focusOnInput();\n        } else if (!fromBlur) {\n          this.handleBlur(event);\n        }\n      }\n\n      return;\n    }\n\n    const newState = {\n      isVisible: keepOpenOnSelect,\n      selectedDate: newDate,\n      selectedDateFormatted: formatSelectedDate(newDate, format),\n      typedValue: null,\n    };\n\n    if (keepOpenOnSelect) {\n      this.focusOnInput();\n    } else if (!fromBlur) {\n      this.handleBlur(event);\n    }\n\n    this.setState(newState, () => {\n      onChange(event, { ...this.props, value: newDate });\n    });\n  };\n\n  handleBlur = (event?: React.SyntheticEvent) => {\n    const { format, onBlur, onChange } = this.props;\n    const { typedValue } = this.state;\n\n    onBlur(event);\n\n    if (!typedValue) {\n      return;\n    }\n\n    if (this.isRangeInput) {\n      const parsedValue = parseRangeOnBlur(String(typedValue), format);\n      const areDatesValid = parsedValue.every(isValid);\n\n      if (areDatesValid) {\n        this.handleRangeInput(parsedValue, event, true);\n        return;\n      }\n    } else {\n      const parsedValue = parseOnBlur(String(typedValue), format);\n      const isDateValid = isValid(parsedValue);\n\n      if (isDateValid) {\n        this.handleBasicInput(parsedValue, event, true);\n        return;\n      }\n    }\n\n    this.setState({ typedValue: null }, () => {\n      onChange(event, { ...this.props, value: null });\n    });\n  };\n\n  handleChange = (event: React.SyntheticEvent, { value }) => {\n    const { allowOnlyNumbers, format, onChange } = this.props;\n    const formatString = this.isRangeInput ? `${format} - ${format}` : format;\n    const typedValue = allowOnlyNumbers ? onlyNumbers(value) : value;\n\n    if (!typedValue) {\n      const newState = {\n        selectedDate: this.isRangeInput ? [] : null,\n        selectedDateFormatted: '',\n        typedValue: null,\n      };\n\n      this.setState(newState, () => {\n        onChange(event, { ...this.props, value: null });\n      });\n\n      return;\n    }\n\n    this.setState({\n      selectedDate: this.isRangeInput ? [] : null,\n      selectedDateFormatted: '',\n      typedValue: formatStringByPattern(formatString, typedValue),\n    });\n  };\n\n  handleKeyDown = (evt) => {\n    // If the Enter key was pressed...\n    if (evt.keyCode === 13) {\n      this.handleBlur();\n    }\n  };\n\n  onDateSelected = (event: React.SyntheticEvent | undefined, dateOrDates) => {\n    if (this.isRangeInput) {\n      this.handleRangeInput(dateOrDates, event);\n    } else {\n      this.handleBasicInput(dateOrDates, event);\n    }\n  };\n\n  render() {\n    const {\n      isVisible,\n      locale,\n      selectedDate,\n      selectedDateFormatted,\n      typedValue,\n    } = this.state;\n    const {\n      clearable,\n      pointing,\n      filterDate,\n      inline,\n      inverted,\n      readOnly,\n      datePickerOnly,\n    } = this.props;\n    const datepickerComponent = (\n      <this.Component\n        {...this.dayzedProps}\n        monthsToDisplay={this.isRangeInput ? 2 : 1}\n        onChange={this.onDateSelected}\n        selected={selectedDate}\n        date={this.date}\n      >\n        {(props) => (\n          <Calendar\n            {...this.dayzedProps}\n            {...props}\n            {...locale}\n            filterDate={filterDate}\n            inverted={inverted}\n            pointing={pointing}\n            weekdays={this.weekdays}\n          />\n        )}\n      </this.Component>\n    );\n\n    return inline ? (\n      datepickerComponent\n    ) : (\n      <div className=\"field\" style={style} ref={this.el}>\n        <Input\n          {...this.inputProps}\n          isClearIconVisible={Boolean(clearable && selectedDateFormatted)}\n          onBlur={() => {}}\n          onChange={this.handleChange}\n          onClear={this.clearInput}\n          onClick={readOnly ? null : this.showCalendar}\n          onKeyDown={this.handleKeyDown}\n          readOnly={readOnly || datePickerOnly}\n          ref={this.inputRef}\n          value={typedValue || selectedDateFormatted}\n        />\n        {isVisible && datepickerComponent}\n      </div>\n    );\n  }\n}\n\nexport default SemanticDatepicker;\n"]},"metadata":{},"sourceType":"module"}