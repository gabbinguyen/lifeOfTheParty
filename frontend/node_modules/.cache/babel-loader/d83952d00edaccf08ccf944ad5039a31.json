{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/jquense/src/uncontrollable/src/uncontrollable.js\";\nimport React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport invariant from 'invariant';\nimport * as Utils from './utils';\nexport default function uncontrollable(Component, controlledValues, methods) {\n  if (methods === void 0) {\n    methods = [];\n  }\n\n  let displayName = Component.displayName || Component.name || 'Component';\n  let canAcceptRef = Utils.canAcceptRef(Component);\n  let controlledProps = Object.keys(controlledValues);\n  const PROPS_TO_OMIT = controlledProps.map(Utils.defaultKey);\n  !(canAcceptRef || !methods.length) ? process.env.NODE_ENV !== \"production\" ? invariant(false, '[uncontrollable] stateless function components cannot pass through methods ' + 'because they have no associated instances. Check component: ' + displayName + ', ' + 'attempting to pass through methods: ' + methods.join(', ')) : invariant(false) : void 0;\n\n  class UncontrolledComponent extends React.Component {\n    constructor() {\n      var _this;\n\n      super(...arguments);\n      _this = this;\n      this.handlers = Object.create(null);\n      controlledProps.forEach(propName => {\n        const handlerName = controlledValues[propName];\n\n        const handleChange = function handleChange(value) {\n          if (_this.props[handlerName]) {\n            _this._notifying = true;\n\n            for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n              args[_key - 1] = arguments[_key];\n            }\n\n            _this.props[handlerName](value, ...args);\n\n            _this._notifying = false;\n          }\n\n          if (!_this.unmounted) _this.setState(_ref => {\n            let values = _ref.values;\n            return {\n              values: _extends(Object.create(null), values, {\n                [propName]: value\n              })\n            };\n          });\n        };\n\n        this.handlers[handlerName] = handleChange;\n      });\n      if (methods.length) this.attachRef = ref => {\n        this.inner = ref;\n      };\n      const values = Object.create(null);\n      controlledProps.forEach(key => {\n        values[key] = this.props[Utils.defaultKey(key)];\n      });\n      this.state = {\n        values,\n        prevProps: {}\n      };\n    }\n\n    shouldComponentUpdate() {\n      //let setState trigger the update\n      return !this._notifying;\n    }\n\n    static getDerivedStateFromProps(props, _ref2) {\n      let values = _ref2.values,\n          prevProps = _ref2.prevProps;\n      const nextState = {\n        values: _extends(Object.create(null), values),\n        prevProps: {}\n      };\n      controlledProps.forEach(key => {\n        /**\n         * If a prop switches from controlled to Uncontrolled\n         * reset its value to the defaultValue\n         */\n        nextState.prevProps[key] = props[key];\n\n        if (!Utils.isProp(props, key) && Utils.isProp(prevProps, key)) {\n          nextState.values[key] = props[Utils.defaultKey(key)];\n        }\n      });\n      return nextState;\n    }\n\n    componentWillUnmount() {\n      this.unmounted = true;\n    }\n\n    render() {\n      let _this$props = this.props,\n          innerRef = _this$props.innerRef,\n          props = _objectWithoutPropertiesLoose(_this$props, [\"innerRef\"]);\n\n      PROPS_TO_OMIT.forEach(prop => {\n        delete props[prop];\n      });\n      let newProps = {};\n      controlledProps.forEach(propName => {\n        let propValue = this.props[propName];\n        newProps[propName] = propValue !== undefined ? propValue : this.state.values[propName];\n      });\n      return React.createElement(Component, _extends({}, props, newProps, this.handlers, {\n        ref: innerRef || this.attachRef\n      }));\n    }\n\n  }\n\n  polyfill(UncontrolledComponent);\n  UncontrolledComponent.displayName = `Uncontrolled(${displayName})`;\n  UncontrolledComponent.propTypes = _extends({\n    innerRef: () => {}\n  }, Utils.uncontrolledPropTypes(controlledValues, displayName));\n  methods.forEach(method => {\n    UncontrolledComponent.prototype[method] = function $proxiedMethod() {\n      return this.inner[method](...arguments);\n    };\n  });\n  let WrappedComponent = UncontrolledComponent;\n\n  if (React.forwardRef) {\n    WrappedComponent = React.forwardRef((props, ref) => React.createElement(UncontrolledComponent, _extends({}, props, {\n      innerRef: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })));\n    WrappedComponent.propTypes = UncontrolledComponent.propTypes;\n  }\n\n  WrappedComponent.ControlledComponent = Component;\n  /**\n   * useful when wrapping a Component and you want to control\n   * everything\n   */\n\n  WrappedComponent.deferControlTo = function (newComponent, additions, nextMethods) {\n    if (additions === void 0) {\n      additions = {};\n    }\n\n    return uncontrollable(newComponent, _extends({}, controlledValues, additions), nextMethods);\n  };\n\n  return WrappedComponent;\n}","map":{"version":3,"sources":["/Users/gabbinguyen/Flatiron/code/Projects/LifeOfTheParty/frontend/node_modules/uncontrollable/esm/uncontrollable.js"],"names":["_objectWithoutPropertiesLoose","_extends","_jsxFileName","React","polyfill","invariant","Utils","uncontrollable","Component","controlledValues","methods","displayName","name","canAcceptRef","controlledProps","Object","keys","PROPS_TO_OMIT","map","defaultKey","length","process","env","NODE_ENV","join","UncontrolledComponent","constructor","_this","arguments","handlers","create","forEach","propName","handlerName","handleChange","value","props","_notifying","_len","args","Array","_key","unmounted","setState","_ref","values","attachRef","ref","inner","key","state","prevProps","shouldComponentUpdate","getDerivedStateFromProps","_ref2","nextState","isProp","componentWillUnmount","render","_this$props","innerRef","prop","newProps","propValue","undefined","createElement","propTypes","uncontrolledPropTypes","method","prototype","$proxiedMethod","WrappedComponent","forwardRef","__source","fileName","lineNumber","__self","ControlledComponent","deferControlTo","newComponent","additions","nextMethods"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/jquense/src/uncontrollable/src/uncontrollable.js\";\nimport React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport invariant from 'invariant';\nimport * as Utils from './utils';\nexport default function uncontrollable(Component, controlledValues, methods) {\n  if (methods === void 0) {\n    methods = [];\n  }\n\n  let displayName = Component.displayName || Component.name || 'Component';\n  let canAcceptRef = Utils.canAcceptRef(Component);\n  let controlledProps = Object.keys(controlledValues);\n  const PROPS_TO_OMIT = controlledProps.map(Utils.defaultKey);\n  !(canAcceptRef || !methods.length) ? process.env.NODE_ENV !== \"production\" ? invariant(false, '[uncontrollable] stateless function components cannot pass through methods ' + 'because they have no associated instances. Check component: ' + displayName + ', ' + 'attempting to pass through methods: ' + methods.join(', ')) : invariant(false) : void 0;\n\n  class UncontrolledComponent extends React.Component {\n    constructor() {\n      var _this;\n\n      super(...arguments);\n      _this = this;\n      this.handlers = Object.create(null);\n      controlledProps.forEach(propName => {\n        const handlerName = controlledValues[propName];\n\n        const handleChange = function handleChange(value) {\n          if (_this.props[handlerName]) {\n            _this._notifying = true;\n\n            for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n              args[_key - 1] = arguments[_key];\n            }\n\n            _this.props[handlerName](value, ...args);\n\n            _this._notifying = false;\n          }\n\n          if (!_this.unmounted) _this.setState((_ref) => {\n            let values = _ref.values;\n            return {\n              values: _extends(Object.create(null), values, {\n                [propName]: value\n              })\n            };\n          });\n        };\n\n        this.handlers[handlerName] = handleChange;\n      });\n      if (methods.length) this.attachRef = ref => {\n        this.inner = ref;\n      };\n      const values = Object.create(null);\n      controlledProps.forEach(key => {\n        values[key] = this.props[Utils.defaultKey(key)];\n      });\n      this.state = {\n        values,\n        prevProps: {}\n      };\n    }\n\n    shouldComponentUpdate() {\n      //let setState trigger the update\n      return !this._notifying;\n    }\n\n    static getDerivedStateFromProps(props, _ref2) {\n      let values = _ref2.values,\n          prevProps = _ref2.prevProps;\n      const nextState = {\n        values: _extends(Object.create(null), values),\n        prevProps: {}\n      };\n      controlledProps.forEach(key => {\n        /**\n         * If a prop switches from controlled to Uncontrolled\n         * reset its value to the defaultValue\n         */\n        nextState.prevProps[key] = props[key];\n\n        if (!Utils.isProp(props, key) && Utils.isProp(prevProps, key)) {\n          nextState.values[key] = props[Utils.defaultKey(key)];\n        }\n      });\n      return nextState;\n    }\n\n    componentWillUnmount() {\n      this.unmounted = true;\n    }\n\n    render() {\n      let _this$props = this.props,\n          innerRef = _this$props.innerRef,\n          props = _objectWithoutPropertiesLoose(_this$props, [\"innerRef\"]);\n\n      PROPS_TO_OMIT.forEach(prop => {\n        delete props[prop];\n      });\n      let newProps = {};\n      controlledProps.forEach(propName => {\n        let propValue = this.props[propName];\n        newProps[propName] = propValue !== undefined ? propValue : this.state.values[propName];\n      });\n      return React.createElement(Component, _extends({}, props, newProps, this.handlers, {\n        ref: innerRef || this.attachRef\n      }));\n    }\n\n  }\n\n  polyfill(UncontrolledComponent);\n  UncontrolledComponent.displayName = `Uncontrolled(${displayName})`;\n  UncontrolledComponent.propTypes = _extends({\n    innerRef: () => {}\n  }, Utils.uncontrolledPropTypes(controlledValues, displayName));\n  methods.forEach(method => {\n    UncontrolledComponent.prototype[method] = function $proxiedMethod() {\n      return this.inner[method](...arguments);\n    };\n  });\n  let WrappedComponent = UncontrolledComponent;\n\n  if (React.forwardRef) {\n    WrappedComponent = React.forwardRef((props, ref) => React.createElement(UncontrolledComponent, _extends({}, props, {\n      innerRef: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })));\n    WrappedComponent.propTypes = UncontrolledComponent.propTypes;\n  }\n\n  WrappedComponent.ControlledComponent = Component;\n  /**\n   * useful when wrapping a Component and you want to control\n   * everything\n   */\n\n  WrappedComponent.deferControlTo = function (newComponent, additions, nextMethods) {\n    if (additions === void 0) {\n      additions = {};\n    }\n\n    return uncontrollable(newComponent, _extends({}, controlledValues, additions), nextMethods);\n  };\n\n  return WrappedComponent;\n}"]},"metadata":{},"sourceType":"module"}