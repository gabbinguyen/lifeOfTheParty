{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/gabbinguyen/Flatiron/code/Projects/LifeOfTheParty/frontend/src/components/EventContainer.js\";\nimport React, { Component } from 'react';\nimport EventCard from './EventCard';\nimport { Button, Card, Row, Col } from 'react-bootstrap';\nimport ControlPanel from './ControlPanel';\nimport NewEvent from './NewEvent';\nimport NewEventModal from './NewEventModal';\nimport ActCRUD from './ActCRUD';\nlet eventsURL = 'http://localhost:3000/events/';\nlet usersURL = \"http://localhost:3000/users/\";\nexport default class EventContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      users: [],\n      events: []\n    };\n\n    this.newEventHandler = data => {\n      this.setState({\n        events: data\n      });\n    };\n\n    this.addCollabHandler = data => {\n      this.setState({\n        events: data\n      });\n    };\n\n    this.newAccomHandler = data => {\n      this.setState({\n        events: data\n      });\n    };\n\n    this.newActHandler = data => {\n      this.setState({\n        events: data\n      });\n    };\n\n    this.newFlightHandler = data => {\n      this.setState({\n        events: data\n      });\n    };\n\n    this.newExpenseHandler = data => {\n      this.setState({\n        events: data\n      });\n    };\n\n    this.handleDelete = event => {\n      fetch(`http://localhost:3000/events/${event.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Auth-Key': localStorage.getItem('auth_key')\n        }\n      });\n      let array = this.state.events;\n      let i = array.indexOf(event);\n\n      if (i > -1) {\n        array.splice(i, 1);\n      }\n\n      this.setState({\n        events: array\n      });\n    };\n\n    this.handleCollabDelete = collaborator => {\n      let events = this.state.events.filter(event => event.id !== collaborator.event_id);\n      fetch(`http://localhost:3000/collaborators/${collaborator.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Auth-Key': localStorage.getItem('auth_key')\n        }\n      });\n      let event = this.state.events.filter(event => event.id == collaborator.event_id);\n      let totalEvents = [...events, event[0]];\n      totalEvents.sort(function (a, b) {\n        return a.id - b.id;\n      });\n      this.setState({\n        events: totalEvents\n      });\n      let filteredEvent = event[0];\n      let filteredAct = event[0].collaborators;\n      let i = filteredEvent.collaborators.indexOf(collaborator);\n\n      if (i > -1) {\n        filteredEvent.collaborators.splice(i, 1);\n      }\n    };\n\n    this.handleAccomDelete = accommodation => {\n      console.log(accommodation);\n      let events = this.state.events.filter(event => event.id !== accommodation.event_id);\n      fetch(`http://localhost:3000/accommodations/${accommodation.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Auth-Key': localStorage.getItem('auth_key')\n        }\n      });\n      let event = this.state.events.filter(event => event.id == accommodation.event_id);\n      let totalEvents = [...events, event[0]];\n      totalEvents.sort(function (a, b) {\n        return a.id - b.id;\n      });\n      this.setState({\n        events: totalEvents\n      });\n      let filteredEvent = event[0];\n      let filteredAct = event[0].accommodations;\n      let i = filteredEvent.accommodations.indexOf(accommodation);\n\n      if (i > -1) {\n        filteredEvent.accommodations.splice(i, 1);\n      }\n    };\n\n    this.handleActDelete = activity => {\n      let events = this.state.events.filter(event => event.id !== activity.event_id);\n      fetch(`http://localhost:3000/activities/${activity.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Auth-Key': localStorage.getItem('auth_key')\n        }\n      });\n      let event = this.state.events.filter(event => event.id == activity.event_id);\n      let totalEvents = [...events, event[0]];\n      totalEvents.sort(function (a, b) {\n        return a.id - b.id;\n      });\n      this.setState({\n        events: totalEvents\n      });\n      let filteredEvent = event[0];\n      let filteredAct = event[0].activities;\n      let i = filteredEvent.activities.indexOf(activity);\n\n      if (i > -1) {\n        filteredEvent.activities.splice(i, 1);\n      }\n    };\n\n    this.handleFlightDelete = flight => {\n      let events = this.state.events.filter(event => event.id !== flight.event_id);\n      fetch(`http://localhost:3000/flights/${flight.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Auth-Key': localStorage.getItem('auth_key')\n        }\n      });\n      let event = this.state.events.filter(event => event.id == flight.event_id);\n      let totalEvents = [...events, event[0]];\n      totalEvents.sort(function (a, b) {\n        return a.id - b.id;\n      });\n      this.setState({\n        events: totalEvents\n      });\n      let filteredEvent = event[0];\n      let filteredAct = event[0].flight;\n      let i = filteredEvent.flights.indexOf(flight);\n\n      if (i > -1) {\n        filteredEvent.flights.splice(i, 1);\n      }\n    };\n\n    this.handleExpenseDelete = expense => {\n      let events = this.state.events.filter(event => event.id !== expense.event_id);\n      fetch(`http://localhost:3000/expenses/${expense.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Auth-Key': localStorage.getItem('auth_key')\n        }\n      });\n      let event = this.state.events.filter(event => event.id == expense.event_id);\n      let totalEvents = [...events, event[0]];\n      totalEvents.sort(function (a, b) {\n        return a.id - b.id;\n      });\n      this.setState({\n        events: totalEvents\n      });\n      let filteredEvent = event[0];\n      let filteredAct = event[0].expense;\n      let i = filteredEvent.expenses.indexOf(expense);\n\n      if (i > -1) {\n        filteredEvent.expenses.splice(i, 1);\n      }\n    };\n  }\n\n  componentDidMount() {\n    fetch(eventsURL, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Auth-Key': localStorage.getItem('auth_key')\n      }\n    }).then(res => res.json()).then(events => {\n      this.setState({\n        events: events\n      });\n    });\n    fetch(usersURL, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Auth-Key': localStorage.getItem('auth_key')\n      }\n    }).then(res => res.json()).then(users => this.setState({\n      users: users\n    }));\n  } // New Attribute Handlers \n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(NewEventModal, {\n        newEvent: this.newEventHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 68\n      }, this), /*#__PURE__*/_jsxDEV(ActCRUD, {\n        event_id: this.props.event.id,\n        activities: this.props.activities,\n        newAct: this.props.newAct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }, this), this.state.events.map(event => /*#__PURE__*/_jsxDEV(EventCard, {\n        users: this.state.users,\n        event: event,\n        name: event.name,\n        date: event.date,\n        collaborators: event.collaborators,\n        activities: event.activities,\n        accommodations: event.accommodations,\n        expenses: event.expenses,\n        flights: event.flights,\n        location: event.location,\n        addCollab: this.addCollabHandler,\n        collabDelete: this.handleCollabDelete,\n        handleDelete: this.handleDelete,\n        newAccom: this.newAccomHandler,\n        accomDelete: this.handleAccomDelete,\n        newAct: this.newActHandler,\n        actDelete: this.handleActDelete,\n        newFlight: this.newFlightHandler,\n        flightDelete: this.handleFlightDelete,\n        newExpense: this.newExpenseHandler,\n        expenseDelete: this.handleExpenseDelete,\n        handleEditEvent: this.handleEditEvent\n      }, event.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/gabbinguyen/Flatiron/code/Projects/LifeOfTheParty/frontend/src/components/EventContainer.js"],"names":["React","Component","EventCard","Button","Card","Row","Col","ControlPanel","NewEvent","NewEventModal","ActCRUD","eventsURL","usersURL","EventContainer","state","users","events","newEventHandler","data","setState","addCollabHandler","newAccomHandler","newActHandler","newFlightHandler","newExpenseHandler","handleDelete","event","fetch","id","method","headers","localStorage","getItem","array","i","indexOf","splice","handleCollabDelete","collaborator","filter","event_id","totalEvents","sort","a","b","filteredEvent","filteredAct","collaborators","handleAccomDelete","accommodation","console","log","accommodations","handleActDelete","activity","activities","handleFlightDelete","flight","flights","handleExpenseDelete","expense","expenses","componentDidMount","then","res","json","render","props","newAct","map","name","date","location","handleEditEvent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport EventCard from './EventCard'\nimport {Button, Card, Row, Col} from 'react-bootstrap'\nimport ControlPanel from './ControlPanel'\nimport NewEvent from './NewEvent'\nimport NewEventModal from './NewEventModal'\nimport ActCRUD from './ActCRUD'\n\nlet eventsURL = 'http://localhost:3000/events/'\nlet usersURL = \"http://localhost:3000/users/\"\n\nexport default class EventContainer extends Component {\n    state={\n        users: [],\n        events: []\n    }\n\n    componentDidMount(){\n        fetch(eventsURL, {\n            method:'GET',\n            headers:{\n                'Content-Type': 'application/json',\n                'Auth-Key': localStorage.getItem('auth_key')\n            }\n        })\n        .then(res => res.json())\n        .then(events => {\n            this.setState({events: events})\n        })\n\n        fetch(usersURL, {\n            method:'GET',\n            headers:{\n                'Content-Type': 'application/json',\n                'Auth-Key': localStorage.getItem('auth_key')\n            }\n        })\n        .then(res => res.json())\n        .then(users => this.setState({users: users})\n        )\n    }\n\n// New Attribute Handlers \n\n    newEventHandler = (data) => {\n        this.setState({events: data})\n    }\n\n    addCollabHandler = (data) => {\n        this.setState({events: data})\n    }\n\n    newAccomHandler = (data) => {\n        this.setState({events: data})    \n    }\n\n    newActHandler = (data) => {\n        this.setState({events: data})\n    }\n\n    newFlightHandler = (data) => {\n        this.setState({events: data})\n    }\n\n    newExpenseHandler = (data) => {\n        this.setState({events: data})\n    }\n\n\n// Event Delete\nhandleDelete = (event) => {\n    fetch(`http://localhost:3000/events/${event.id}`, {\n        method: 'DELETE',\n        headers:{\n            'Content-Type': 'application/json',\n            'Auth-Key': localStorage.getItem('auth_key')\n        }\n    })\n    let array = this.state.events;\n    \n    let i = array.indexOf(event);\n        if (i > -1) {\n            array.splice(i, 1);\n        }\n    this.setState({\n        events: array\n    })\n}\n\n// Collab Delete\nhandleCollabDelete = (collaborator) => {\n    let events = this.state.events.filter(event=>event.id !== collaborator.event_id)\n    fetch(`http://localhost:3000/collaborators/${collaborator.id}`, {\n        method: 'DELETE',\n        headers:{\n            'Content-Type': 'application/json',\n            'Auth-Key': localStorage.getItem('auth_key')\n        }\n    })\n\n    let event = this.state.events.filter(event => event.id == collaborator.event_id)\n    let totalEvents = [...events,event[0]]\n    totalEvents.sort(function(a,b){\n        return a.id-b.id\n    })\n    this.setState({\n            events: totalEvents\n        })\n    let filteredEvent = event[0]\n    let filteredAct = event[0].collaborators\n    \n    let i = filteredEvent.collaborators.indexOf(collaborator);\n        if (i > -1) {\n            filteredEvent.collaborators.splice(i, 1);\n        }\n\n}\n\n// Accomodation Delete\nhandleAccomDelete = (accommodation) => {\n    console.log(accommodation)\n    let events = this.state.events.filter(event=>event.id !== accommodation.event_id)\n    fetch(`http://localhost:3000/accommodations/${accommodation.id}`, {\n        method: 'DELETE',\n        headers:{\n            'Content-Type': 'application/json',\n            'Auth-Key': localStorage.getItem('auth_key')\n        }\n    })\n\n    let event = this.state.events.filter(event => event.id == accommodation.event_id)\n    let totalEvents = [...events,event[0]]\n    totalEvents.sort(function(a,b){\n        return a.id-b.id\n    })\n    this.setState({\n            events: totalEvents\n        })\n    let filteredEvent = event[0]\n    let filteredAct = event[0].accommodations\n    \n    let i = filteredEvent.accommodations.indexOf(accommodation);\n        if (i > -1) {\n            filteredEvent.accommodations.splice(i, 1);\n        }\n\n}\n\n// Activities Delete\n    handleActDelete = (activity) => {\n        let events = this.state.events.filter(event=>event.id !== activity.event_id)\n        fetch(`http://localhost:3000/activities/${activity.id}`, {\n            method: 'DELETE',\n            headers:{\n                'Content-Type': 'application/json',\n                'Auth-Key': localStorage.getItem('auth_key')\n            }\n        })\n\n        let event = this.state.events.filter(event => event.id == activity.event_id)\n        let totalEvents = [...events,event[0]]\n        totalEvents.sort(function(a,b){\n            return a.id-b.id\n        })\n        this.setState({\n                events: totalEvents\n            })\n        let filteredEvent = event[0]\n        let filteredAct = event[0].activities\n        \n        let i = filteredEvent.activities.indexOf(activity);\n            if (i > -1) {\n                filteredEvent.activities.splice(i, 1);\n            }\n\n    }\n\n// Flight Delete\nhandleFlightDelete = (flight) => {\n    let events = this.state.events.filter(event=>event.id !== flight.event_id)\n    fetch(`http://localhost:3000/flights/${flight.id}`, {\n        method: 'DELETE',\n        headers:{\n            'Content-Type': 'application/json',\n            'Auth-Key': localStorage.getItem('auth_key')\n        }\n    })\n\n    let event = this.state.events.filter(event => event.id == flight.event_id)\n    let totalEvents = [...events,event[0]]\n    totalEvents.sort(function(a,b){\n        return a.id-b.id\n    })\n    this.setState({\n            events: totalEvents\n        })\n    let filteredEvent = event[0]\n    let filteredAct = event[0].flight\n    \n    let i = filteredEvent.flights.indexOf(flight);\n        if (i > -1) {\n            filteredEvent.flights.splice(i, 1);\n        }\n}\n\n// Expense Delete\nhandleExpenseDelete = (expense) => {\n    let events = this.state.events.filter(event=>event.id !== expense.event_id)\n    fetch(`http://localhost:3000/expenses/${expense.id}`, {\n        method: 'DELETE',\n        headers:{\n            'Content-Type': 'application/json',\n            'Auth-Key': localStorage.getItem('auth_key')\n        }\n    })\n\n    let event = this.state.events.filter(event => event.id == expense.event_id)\n    let totalEvents = [...events,event[0]]\n    totalEvents.sort(function(a,b){\n        return a.id-b.id\n    })\n    this.setState({\n            events: totalEvents\n        })\n    let filteredEvent = event[0]\n    let filteredAct = event[0].expense\n    \n    let i = filteredEvent.expenses.indexOf(expense);\n        if (i > -1) {\n            filteredEvent.expenses.splice(i, 1);\n        }\n}\n    \n    render() {\n        return (\n            <div>\n                <NewEventModal newEvent={this.newEventHandler}  /> <br/>\n                <ActCRUD \n                    event_id={this.props.event.id} \n                    activities={this.props.activities}\n                    newAct={this.props.newAct}\n                    /> \n                {/* <NewEvent newEvent={this.newEventHandler} />  */}\n            {this.state.events.map(event => \n                    <EventCard \n                        users={this.state.users}\n                        key={event.id}\n                        event={event}\n                        name={event.name} \n                        date={event.date}\n                        collaborators={event.collaborators} \n                        activities={event.activities}\n                        accommodations={event.accommodations}\n                        expenses={event.expenses}\n                        flights={event.flights}\n                        location={event.location}\n                        addCollab={this.addCollabHandler}\n                        collabDelete={this.handleCollabDelete}\n                        handleDelete={this.handleDelete}\n                        newAccom={this.newAccomHandler}\n                        accomDelete={this.handleAccomDelete}\n                        newAct={this.newActHandler}\n                        actDelete={this.handleActDelete}\n                        newFlight={this.newFlightHandler}\n                        flightDelete={this.handleFlightDelete}\n                        newExpense={this.newExpenseHandler}\n                        expenseDelete={this.handleExpenseDelete}\n                        handleEditEvent={this.handleEditEvent}\n                        />\n            )} \n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}